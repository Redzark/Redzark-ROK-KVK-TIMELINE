<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoK KvK Dashboard</title>
    <style>
        :root {
            --bg-color: #f5f7fa;
            --section-bg: #ffffff;
            --text-main: #2d3436;
            --accent-ruins: #6c5ce7; /* ë³´ë¼ (íí—ˆ) */
            --accent-altar: #d63031; /* ë¹¨ê°• (ì œë‹¨) */
            --accent-pass: #0984e3;  /* íŒŒë‘ (ê´€ë¬¸) */
            --timer-bg: #f1f2f6;
        }

        body {
            font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 40px;
            color: #2c3e50;
        }

        /* ê³µí†µ ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ */
        .container {
            width: 100%;
            max-width: 1100px;
            margin-bottom: 40px;
        }

        /* ì„¹ì…˜ ì œëª© */
        .section-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #636e72;
            border-left: 5px solid #2d3436;
            padding-left: 10px;
            display: flex;
            align-items: center;
        }

        /* 1. íí—ˆ/ì œë‹¨ ê·¸ë¦¬ë“œ (2ì—´) */
        .grid-recurring {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }

        /* 2. ê´€ë¬¸ ê·¸ë¦¬ë“œ (3ì—´) */
        .grid-passes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        /* ì¹´ë“œ ë””ìì¸ */
        .card {
            background: var(--section-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: transform 0.2s;
        }
        .card:hover { transform: translateY(-2px); }

        /* ì¹´ë“œ í—¤ë” */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #dfe6e9;
        }

        .card-title { font-size: 1.4em; font-weight: 800; }
        
        /* ìƒ‰ìƒ í¬ì¸íŠ¸ */
        .ruins .card-title { color: var(--accent-ruins); }
        .altar .card-title { color: var(--accent-altar); }
        .pass .card-title { color: var(--accent-pass); }

        /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
        .input-group { margin-bottom: 15px; }
        
        label {
            display: block;
            font-size: 0.85em;
            color: #636e72;
            margin-bottom: 8px;
            font-weight: 600;
        }

        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #b2bec3;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
            background-color: #fff;
        }
        
        input[type="number"] {
            width: 80px;
            text-align: center;
            font-weight: bold;
        }

        /* íƒ€ì´ë¨¸ ìˆ«ì */
        .timer-display {
            background-color: var(--timer-bg);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            font-size: 2.2rem;
            font-family: 'Consolas', monospace;
            font-weight: 700;
            color: #2d3436;
            margin-top: auto;
        }

        .timer-over {
            color: #d63031;
            background-color: #fab1a0;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* ë‹¬ë ¥ ì„¹ì…˜ */
        .calendar-section {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            text-align: center;
            margin-top: 20px;
        }

        .day-head { font-weight: bold; padding-bottom: 10px; color: #b2bec3; }
        
        .day-cell {
            padding: 15px;
            background: #f1f2f6;
            border-radius: 8px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            font-weight: bold;
            color: #2d3436;
        }

        .day-cell.today {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            color: #0984e3;
        }

    </style>
</head>
<body>

    <h1>ğŸ° KvK ì‘ì „ ìƒí™©íŒ</h1>

    <div class="container">
        <div class="section-title" style="border-color: #6c5ce7;">âš”ï¸ ì£¼ìš” ì˜¤ë¸Œì íŠ¸ (íšŒì°¨/ì‹œê°„)</div>
        <div class="grid-recurring">
            
            <div class="card ruins">
                <div class="card-header">
                    <span class="card-title">âœ¨ ê³ ëŒ€ íí—ˆ</span>
                    <div>
                        <label style="display:inline; margin-right:5px;">íšŒì°¨</label>
                        <input type="number" id="round-ruins" value="1">
                    </div>
                </div>
                <div class="input-group">
                    <label>ì˜¤í”ˆ ëª©í‘œ ì‹œê°„</label>
                    <input type="datetime-local" id="time-ruins">
                </div>
                <div class="timer-display" id="disp-ruins">--:--:--</div>
            </div>

            <div class="card altar">
                <div class="card-header">
                    <span class="card-title">ğŸ”¥ ì–´ë‘ ì˜ ì œë‹¨</span>
                    <div>
                        <label style="display:inline; margin-right:5px;">íšŒì°¨</label>
                        <input type="number" id="round-altar" value="1">
                    </div>
                </div>
                <div class="input-group">
                    <label>ì˜¤í”ˆ ëª©í‘œ ì‹œê°„</label>
                    <input type="datetime-local" id="time-altar">
                </div>
                <div class="timer-display" id="disp-altar">--:--:--</div>
            </div>

        </div>
    </div>

    <div class="container">
        <div class="section-title" style="border-color: #0984e3;">ğŸ›¡ï¸ ê´€ë¬¸ ì˜¤í”ˆ ì¼ì •</div>
        <div class="grid-passes">
            
            <div class="card pass">
                <div class="card-header"><span class="card-title">4 ê´€ë¬¸</span></div>
                <div class="input-group">
                    <label>ì˜¤í”ˆ ì˜ˆì •</label>
                    <input type="datetime-local" id="time-pass4">
                </div>
                <div class="timer-display" id="disp-pass4">--:--:--</div>
            </div>

            <div class="card pass">
                <div class="card-header"><span class="card-title">5 ê´€ë¬¸</span></div>
                <div class="input-group">
                    <label>ì˜¤í”ˆ ì˜ˆì •</label>
                    <input type="datetime-local" id="time-pass5">
                </div>
                <div class="timer-display" id="disp-pass5">--:--:--</div>
            </div>

            <div class="card pass">
                <div class="card-header"><span class="card-title">6 ê´€ë¬¸</span></div>
                <div class="input-group">
                    <label>ì˜¤í”ˆ ì˜ˆì •</label>
                    <input type="datetime-local" id="time-pass6">
                </div>
                <div class="timer-display" id="disp-pass6">--:--:--</div>
            </div>

        </div>
    </div>

    <div class="container calendar-section">
        <div class="section-title">ğŸ“… 2025ë…„ 12ì›” ì¼ì •</div>
        <div class="calendar-grid" id="calendar-body">
            </div>
    </div>

    <script>
        // ì´ˆê¸° ê¸°ë³¸ê°’ ì„¤ì • (ì˜¤ëŠ˜: 2025-12-09)
        const defaults = {
            'time-ruins': '2025-12-09T12:00',
            'time-altar': '2025-12-09T12:00',
            'time-pass4': '2025-12-09T18:00',
            'time-pass5': '2025-12-10T18:00',
            'time-pass6': '2025-12-11T18:00',
            'round-ruins': '1',
            'round-altar': '1'
        };

        // 1. ì €ì¥ëœ ë°ì´í„° ë¡œë“œ (ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©)
        function loadData() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                const saved = localStorage.getItem(input.id);
                if (saved) {
                    input.value = saved;
                } else if (defaults[input.id]) {
                    input.value = defaults[input.id]; // ìµœì´ˆ ì‹¤í–‰ ì‹œ ê¸°ë³¸ê°’ ì±„ì›€
                }
            });
        }

        // 2. ë°ì´í„° ë³€ê²½ ì‹œ ì €ì¥
        function setupListeners() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('change', (e) => {
                    localStorage.setItem(e.target.id, e.target.value);
                    updateTimers(); // ì¦‰ì‹œ ê°±ì‹ 
                });
            });
        }

        // 3. íƒ€ì´ë¨¸ ë¡œì§
        function updateTimers() {
            const now = new Date().getTime();
            const ids = ['ruins', 'altar', 'pass4', 'pass5', 'pass6'];

            ids.forEach(id => {
                const inputEl = document.getElementById(`time-${id}`);
                const dispEl = document.getElementById(`disp-${id}`);

                if (!inputEl || !inputEl.value) {
                    dispEl.innerText = "--:--:--";
                    return;
                }

                const target = new Date(inputEl.value).getTime();
                const diff = target - now;

                if (diff < 0) {
                    dispEl.innerText = "OPEN / ì¢…ë£Œ";
                    dispEl.classList.add('timer-over');
                } else {
                    dispEl.classList.remove('timer-over');
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                    let txt = "";
                    if (days > 0) txt += `${days}ì¼ `;
                    txt += `${String(hours).padStart(2,'0')}:${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;
                    dispEl.innerText = txt;
                }
            });
        }

        // 4. ë‹¬ë ¥ ê·¸ë¦¬ê¸° (2025ë…„ 12ì›” ê³ ì •)
        function drawCalendar() {
            const container = document.getElementById('calendar-body');
            const heads = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];
            
            heads.forEach(h => {
                const div = document.createElement('div');
                div.className = 'day-head';
                div.innerText = h;
                container.appendChild(div);
            });

            // 2025.12.01 = ì›”ìš”ì¼(1)
            const startDay = 1; 
            const totalDays = 31;
            const today = 9;

            // ë¹ˆì¹¸
            for(let i=0; i<startDay; i++) {
                container.appendChild(document.createElement('div'));
            }

            // ë‚ ì§œ
            for(let i=1; i<=totalDays; i++) {
                const div = document.createElement('div');
                div.className = 'day-cell';
                div.innerText = i;
                if(i === today) {
                    div.classList.add('today');
                    div.innerHTML += '<span style="font-size:0.7em; margin-top:5px;">TODAY</span>';
                }
                container.appendChild(div);
            }
        }

        // ì‹¤í–‰
        window.addEventListener('DOMContentLoaded', () => {
            loadData();
            setupListeners();
            drawCalendar();
            setInterval(updateTimers, 1000);
            updateTimers();
        });
    </script>
</body>
</html>
