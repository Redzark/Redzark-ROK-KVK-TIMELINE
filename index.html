<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1689ì„œë²„ KvK ì¼ì • ë° íƒ€ì´ë¨¸</title>
    <style>
        /* --- ê¸°ë³¸ ìŠ¤íƒ€ì¼ --- */
        * { box-sizing: border-box; }
        body {
            font-family: sans-serif;
            background-color: #1a1a2e;
            color: #ffffff;
            margin: 0;
            padding: 10px;
            text-align: center;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding-bottom: 50px;
        }
        h1 { color: #ff3859; margin: 10px 0 5px 0; font-size: 1.8em; }
        h2 { color: #b0b0b0; font-size: 1em; margin-bottom: 20px; }

        /* --- ë‹¬ë ¥ ìŠ¤íƒ€ì¼ --- */
        .calendar-wrapper {
            background-color: #2a2a4a;
            border-radius: 8px;
            padding: 10px;
            overflow-x: auto; /* ëª¨ë°”ì¼ ê°€ë¡œ ìŠ¤í¬ë¡¤ */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            margin-bottom: 30px;
        }
        table {
            width: 100%;
            min-width: 600px; /* í‘œê°€ ì°Œê·¸ëŸ¬ì§€ì§€ ì•Šê²Œ ìµœì†Œ ë„ˆë¹„ ì„¤ì • */
            border-collapse: collapse;
            table-layout: fixed;
        }
        th {
            background-color: #33395b;
            color: #ffcc00;
            padding: 8px;
            border: 1px solid #444;
        }
        td {
            height: 100px;
            border: 1px solid #444;
            padding: 4px;
            vertical-align: top;
            text-align: left;
            position: relative;
            background-color: #2a2a4a;
        }

        /* ë‚ ì§œ ìˆ«ì */
        .day-num { font-size: 1.1em; font-weight: bold; display: block; margin-bottom: 2px; }
        .sun-col { color: #ff5757; }
        .sat-col { color: #8af7a0; }

        /* [ìš”ì²­ ë””ìì¸] ì˜¤ëŠ˜ ë‚ ì§œ */
        .today-cell {
            border: 2px solid #ffcc00 !important;
            box-shadow: inset 0 0 10px rgba(255, 204, 0, 0.2);
        }
        .today-tag {
            display: block;
            color: #ffcc00;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 4px;
        }

        /* ì´ë²¤íŠ¸ ë¼ë²¨ */
        .evt {
            display: block;
            font-size: 0.75em;
            color: #fff;
            padding: 2px;
            margin-top: 2px;
            border-radius: 3px;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .evt-ph { background-color: #555; } /* ì¼ë°˜ ì—°ëŒ€ê¸° */
        .evt-fx { background-color: #007bff; } /* ê³ ì •/ê´€ë¬¸ */
        .evt-mj { background-color: #ff8c00; font-weight: bold; color: #fff; } /* ì£¼ìš” */

        /* --- íƒ€ì´ë¨¸ ìŠ¤íƒ€ì¼ --- */
        .sec-title {
            color: #ffcc00;
            font-size: 1.4em;
            border-bottom: 2px solid #33395b;
            padding-bottom: 8px;
            margin: 30px 0 15px 0;
        }
        .timer-box {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }
        .t-card {
            background-color: #2a2a4a;
            padding: 15px;
            border-radius: 8px;
            flex: 1 1 300px; /* ë°˜ì‘í˜• í¬ê¸° */
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .t-name { font-size: 1.2em; color: #8af7a0; font-weight: bold; margin-bottom: 5px; }
        .t-time { font-size: 2em; color: #4CAF50; font-weight: bold; margin: 10px 0; }
        .t-info { font-size: 0.85em; color: #aaa; }
        .t-cycle { color: #ff8c00; font-size: 0.9em; font-weight: bold; }
        
        #err-log { color: #aaa; margin-top: 20px; font-size: 0.8em; }
    </style>
</head>
<body>

    <div class="container">
        <h1>1689ì„œë²„ ì‹ ê¸°ë¬˜ì‚° KVK íƒ€ì„ë¼ì¸</h1> 
        <h2>2025ë…„ 12ì›” KvK ì „ì²´ ì¼ì •</h2>

        <div class="calendar-wrapper">
            <table id="cal-table">
                <thead>
                    <tr>
                        <th style="color:#ff5757;">ì¼</th>
                        <th>ì›”</th>
                        <th>í™”</th>
                        <th>ìˆ˜</th>
                        <th>ëª©</th>
                        <th>ê¸ˆ</th>
                        <th style="color:#8af7a0;">í† </th>
                    </tr>
                </thead>
                <tbody id="cal-body"></tbody>
            </table>
        </div>

        <div class="sec-title">ğŸ•’ íí—ˆ/ì œë‹¨ ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸ë‹¤ìš´</div>
        <div class="timer-box" id="timers"></div>

        <div id="err-log"></div>
    </div>

    <script>
        // --- êµ¬í˜• ë¸Œë¼ìš°ì € ì§€ì›ì„ ìœ„í•œ í—¬í¼ í•¨ìˆ˜ ---
        function pad(n) {
            return (n < 10 ? '0' : '') + n;
        }

        function safeDate(str) {
            // "2025-12-05 12:30" í˜•ì‹ íŒŒì‹±
            if(!str) return new Date();
            var parts = str.split(' ');
            var d = parts[0].split('-');
            var t = (parts[1] || "00:00").split(':');
            return new Date(d[0], d[1]-1, d[2], t[0], t[1]);
        }

        // --- ë°ì´í„° ì •ì˜ ---
        // 1. ë‹¬ë ¥ ì´ë²¤íŠ¸ (YYYY-MM-DD)
        var CAL_DATA = [
            { d: "2025-12-05", n: "ì²«ê±¸ìŒ", t: "evt-ph" },
            { d: "2025-12-06", n: "ì›ì •êµ° ì£¼ë‘”ì§€", t: "evt-fx" },
            { d: "2025-12-07", n: "ëˆˆì—ëŠ” ëˆˆ", t: "evt-ph" },
            { d: "2025-12-08", n: "ì§„ì˜ ìš”ìƒˆ", t: "evt-fx" },
            { d: "2025-12-08", n: "ìš”ì§€ì˜ ì „ìŸ", t: "evt-ph" },
            { d: "2025-12-10", n: "í˜‘ë ¥", t: "evt-ph" },
            { d: "2025-12-11", n: "íí—ˆ ì˜¤í”ˆ ì‹œì‘", t: "evt-mj" },
            { d: "2025-12-11", n: "ì§•ë²Œ", t: "evt-ph" },
            { d: "2025-12-13", n: "ë³µìˆ˜", t: "evt-ph" },
            { d: "2025-12-14", n: "4ê´€ë¬¸ ê°œë°©", t: "evt-fx" },
            { d: "2025-12-14", n: "ë¨¹êµ¬ë¦„", t: "evt-ph" },
            { d: "2025-12-15", n: "ëŠ‘ëŒ€ì™€ ì™•", t: "evt-ph" },
            { d: "2025-12-16", n: "ì‹ ì „ ê°œë°©", t: "evt-fx" },
            { d: "2025-12-17", n: "ìˆœë¡€", t: "evt-ph" },
            { d: "2025-12-18", n: "5ê´€ë¬¸ ê°œë°©", t: "evt-fx" },
            { d: "2025-12-18", n: "ì „ì§„", t: "evt-ph" },
            { d: "2025-12-19", n: "ì„±ì „ ê°œë°©", t: "evt-fx" },
            { d: "2025-12-19", n: "ì„±ì „ ì ë ¹", t: "evt-ph" },
            { d: "2025-12-20", n: "6ê´€ë¬¸ ê°œë°©", t: "evt-fx" },
            { d: "2025-12-21", n: "ì ‘ì „ í—ˆê°€", t: "evt-ph" },
            { d: "2025-12-22", n: "ì œë‹¨ ì˜¤í”ˆ ì‹œì‘", t: "evt-mj" },
            { d: "2025-12-22", n: "í¬ìƒì", t: "evt-ph" },
            { d: "2025-12-24", n: "ê°ˆë“±ê³¼ ë¶„ìŸ", t: "evt-ph" },
            { d: "2025-12-26", n: "ë‹¨í•©ì˜ ì¥ (ë)", t: "evt-ph" }
        ];

        // 2. íƒ€ì´ë¨¸ ë°ì´í„° (YYYY-MM-DD HH:MM)
        var TIMER_DATA = [
            { name: "íí—ˆ", start: "2025-12-11 00:10", interval: 40, max: 28 },
            { name: "ì œë‹¨", start: "2025-12-22 00:10", interval: 86, max: 10 }
        ];

        // --- ë©”ì¸ ë¡œì§ ---
        function init() {
            try {
                renderCalendar();
                setInterval(renderTimers, 1000);
                renderTimers();
            } catch (e) {
                document.getElementById('err-log').innerHTML = "ì˜¤ë¥˜ ë°œìƒ: " + e.message;
            }
        }

        function renderCalendar() {
            var tbody = document.getElementById('cal-body');
            var html = "";
            var year = 2025;
            var month = 11; // 12ì›” (0-based)
            
            // 2025ë…„ 12ì›” 1ì¼ì€ ì›”ìš”ì¼
            var firstDate = new Date(year, month, 1);
            var startDay = firstDate.getDay(); // 0:ì¼, 1:ì›” ...
            var lastDate = new Date(year, month + 1, 0).getDate(); // 31
            
            var dayCount = 1;
            var rowOpen = false;

            // ìµœëŒ€ 6ì£¼
            for (var r = 0; r < 6; r++) {
                if (dayCount > lastDate) break;
                
                html += "<tr>";
                for (var c = 0; c < 7; c++) {
                    // ì²« ì£¼ ê³µë°± ì±„ìš°ê¸°
                    if (r === 0 && c < startDay) {
                        html += "<td style='border:none; background:#1f1f38;'></td>";
                    } else if (dayCount <= lastDate) {
                        html += buildCell(year, month, dayCount, c);
                        dayCount++;
                    } else {
                        html += "<td style='border:none; background:#1f1f38;'></td>";
                    }
                }
                html += "</tr>";
            }
            tbody.innerHTML = html;
        }

        function buildCell(y, m, d, w) {
            // ì˜¤ëŠ˜ í™•ì¸
            var now = new Date();
            var isToday = (now.getFullYear() === y && now.getMonth() === m && now.getDate() === d);
            
            var classes = "";
            var content = "";
            
            if (isToday) {
                classes += " today-cell";
                content += "<span class='today-tag'>ì˜¤ëŠ˜</span>";
            }
            
            // ë‚ ì§œ ìˆ«ì ìƒ‰ìƒ
            var numClass = "";
            if (w === 0) numClass = "sun-col";
            if (w === 6) numClass = "sat-col";
            
            content += "<span class='day-num " + numClass + "'>" + d + "</span>";

            // ì´ë²¤íŠ¸ ì°¾ê¸°
            var dateKey = y + "-" + pad(m + 1) + "-" + pad(d);
            for (var i = 0; i < CAL_DATA.length; i++) {
                if (CAL_DATA[i].d === dateKey) {
                    content += "<span class='evt " + CAL_DATA[i].t + "'>" + CAL_DATA[i].n + "</span>";
                }
            }
            
            return "<td class='" + classes + "'>" + content + "</td>";
        }

        function renderTimers() {
            var box = document.getElementById('timers');
            var now = new Date();
            var html = "";

            for (var i = 0; i < TIMER_DATA.length; i++) {
                var item = TIMER_DATA[i];
                var start = safeDate(item.start);
                var ms = item.interval * 3600000;
                var count = 1;

                // ë‹¤ìŒ ì‹œê°„ ì°¾ê¸°
                var next = new Date(start.getTime());
                while (next < now) {
                    next = new Date(next.getTime() + ms);
                    count++;
                }

                var diff = next - now;
                var d = Math.floor(diff / 86400000);
                var h = Math.floor((diff % 86400000) / 3600000);
                var m = Math.floor((diff % 3600000) / 60000);
                var s = Math.floor((diff % 60000) / 1000);

                var timeStr = (d > 0 ? d + "ì¼ " : "") + pad(h) + ":" + pad(m) + ":" + pad(s);
                var info = "[ " + count + "íšŒì°¨ / ì´ " + item.max + "íšŒ ]";

                if (count > item.max) {
                    timeStr = "ì¢…ë£Œë¨";
                    info = "ëª¨ë“  ì¼ì • ì¢…ë£Œ";
                }
                
                // ë‚ ì§œ í‘œì‹œ
                var nextStr = (next.getMonth() + 1) + "." + next.getDate() + ". " + pad(next.getHours()) + ":" + pad(next.getMinutes());

                html += "<div class='t-card'>" +
                        "<div class='t-name'>" + item.name + "</div>" +
                        "<div class='t-cycle'>" + info + "</div>" +
                        "<div class='t-time'>" + timeStr + "</div>" +
                        "<div class='t-info'>ë‹¤ìŒ: " + nextStr + "</div>" +
                        "</div>";
            }
            box.innerHTML = html;
        }

        // ì‹¤í–‰
        window.onload = init;
    </script>
</body>
</html>
