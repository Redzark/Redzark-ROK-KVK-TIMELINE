<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KvK ì‹ ê¸°ë¬˜ì‚° íƒ€ì´ë¨¸ | 1689</title>
    <style>
        /* CSS ìŠ¤íƒ€ì¼ ì‹œì‘ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #16182a; /* ë” ì§„í•œ ë°°ê²½ */
            color: #ffffff;
            margin: 0;
            padding: 30px 10px;
            text-align: center;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
        }
        h1 {
            color: #ff3859; /* íƒ€ì´í‹€ ìƒ‰ìƒ ê°•ì¡° */
            margin-bottom: 5px;
            font-size: 2.2em;
        }
        h2 {
            color: #b0b0b0;
            font-size: 1.1em;
            margin-bottom: 30px;
        }
        .status-header {
            background-color: #33395b;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: space-around;
        }
        .status-item {
            flex-basis: 48%;
            text-align: left;
            padding: 0 10px;
        }
        .status-item h3 {
            color: #ffcc00; /* í™©ê¸ˆìƒ‰ ê°•ì¡° */
            margin: 0 0 5px 0;
            font-size: 1.2em;
        }
        .status-item .time-left {
            font-size: 1.8em;
            font-weight: bold;
            color: #fff;
        }

        .section-title {
            color: #4CAF50;
            font-size: 1.8em;
            margin-top: 40px;
            margin-bottom: 20px;
            border-bottom: 2px solid #33395b;
            padding-bottom: 5px;
        }

        /* ì´ë²¤íŠ¸ ì¹´ë“œ ê·¸ë¦¬ë“œ */
        .event-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }
        .event-card {
            background-color: #2a2a4a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .event-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #8af7a0; 
            margin-bottom: 5px;
        }
        .countdown {
            font-size: 2em;
            font-weight: 700;
            color: #ffcc00; 
            letter-spacing: 1px;
            margin-top: 5px;
        }
        .next-time {
            font-size: 0.8em;
            color: #aaa;
            margin-top: 5px;
        }
        .cycle-info {
            font-size: 0.9em;
            color: #ff8c00; /* íšŒì°¨ ê°•ì¡° */
            font-weight: 600;
            margin-top: 5px;
        }
        .passed {
            color: #ff5757;
            font-size: 1.1em;
        }
        /* CSS ìŠ¤íƒ€ì¼ ë */
    </style>
</head>
<body>
    <div class="container">
        <h1>âš”ï¸ RoK KvK ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ íƒ€ì´ë¨¸</h1>
        <h2>[ KvK ì‹ ê¸°ë¬˜ì‚° | ì„œë²„ 1689 ]</h2>
        
        <div class="status-header" id="chronology-status">
            </div>

        <div class="section-title">ğŸ”‘ ì£¼ìš” ì´ë²¤íŠ¸ ë° ê´€ë¬¸ ì˜¤í”ˆê¹Œì§€ ë‚¨ì€ ì‹œê°„</div>
        <div class="event-grid" id="countdown-grid-fixed">
            </div>

        <div class="section-title">ğŸ” ë°˜ë³µ ì´ë²¤íŠ¸ ë‚¨ì€ ì‹œê°„ (íšŒì°¨ í‘œì‹œ)</div>
        <div class="event-grid" id="countdown-grid-recurring">
            </div>
    </div>

    <script>
        // JavaScript ì½”ë“œ ì‹œì‘
        
        // --- 1. ì´ë²¤íŠ¸ ë°ì´í„° ì„¤ì • ---
        const KST_OFFSET = ":00 +09:00"; 

        // 1-A. ë°˜ë³µ ì´ë²¤íŠ¸ ëª©ë¡ (íí—ˆ/ì œë‹¨)
        const RECURRING_EVENTS = [
            // [ì´ë¦„, ì²« ì‹œì‘ ì‹œê° (YYYY-MM-DD HH:MM), ì£¼ê¸° (ì‹œê°„), ì´ íšŸìˆ˜]
            ["íí—ˆ", "2025-12-11 00:10", 40, 28], 
            ["ì œë‹¨", "2025-12-22 00:10", 86, 10], 
        ];

        // 1-B. ì—°ëŒ€ê¸° ì „ì²´ ëª©ë¡ ë° ì£¼ìš” ê³ ì • ì´ë²¤íŠ¸ (í…Œì´ë¸” ê¸°ë°˜)
        const CHRONOLOGY_PHASES = [
            // [ì´ë¦„, ì™„ë£Œ ì‹œê° (MM-DD HH:MM), íƒ€ì…]
            ["ì²«ê±¸ìŒ", "12-05 12:30", "End"],
            ["ì›ì •êµ° ì£¼ë‘”ì§€ ê°œë°©", "12-06 00:30", "Fixed"],
            ["ëˆˆì—ëŠ” ëˆˆ", "12-07 12:30", "End"],
            ["ì§„ì˜ ìš”ìƒˆ ê°œë°©", "12-08 00:30", "Fixed"],
            ["ìš”ì§€ì˜ ì „ìŸ", "12-08 12:30", "End"],
            ["í˜‘ë ¥", "12-10 12:30", "End"],
            ["íí—ˆ ì˜¤í”ˆ ì‹œì‘", "12-11 00:30", "Fixed"], 
            ["ì§•ë²Œ", "12-11 12:30", "End"],
            ["ë³µìˆ˜ (ì¹´ë“œì§‘ +1)", "12-13 12:30", "End"],
            ["4ê´€ë¬¸ ì¼ë¶€ ê°œë°©", "12-14 00:30", "Pass"], // ì£¼ìš” ì´ë²¤íŠ¸
            ["ë¨¹êµ¬ë¦„ (êµ°ë‹¨ +1)", "12-14 12:30", "End"],
            ["ëŠ‘ëŒ€ì™€ ì™•", "12-15 12:30", "End"],
            ["ì‹ ì „ ê°œë°©", "12-16 00:30", "Fixed"],
            ["ìˆœë¡€", "12-17 12:30", "End"],
            ["5ê´€ë¬¸ ì¼ë¶€ ê°œë°©", "12-18 00:30", "Pass"], // ì£¼ìš” ì´ë²¤íŠ¸
            ["ì „ì§„", "12-18 12:30", "End"],
            ["ì„±ì „ ê°œë°©", "12-19 00:30", "Fixed"],
            ["ì„±ì „ ì ë ¹ (êµ°ë‹¨ +1)", "12-19 12:30", "End"],
            ["6ê´€ë¬¸ ì¼ë¶€ ê°œë°©", "12-20 00:30", "Pass"], // ì£¼ìš” ì´ë²¤íŠ¸
            ["ì ‘ì „ í—ˆê°€", "12-21 12:30", "End"],
            ["ì œë‹¨ ì˜¤í”ˆ ì‹œì‘", "12-22 00:30", "Fixed"], 
            ["í¬ìƒì (12ì•¼ë„)", "12-22 12:30", "End"],
            // 7ê´€ë¬¸ ìš”ì²­ì— ë”°ë¼ ì‚­ì œë¨
            ["ê°ˆë“±ê³¼ ë¶„ìŸ", "12-24 12:30", "End"],
            ["ë‹¨í•©ì˜ ì¥ (KvK ì¢…ë£Œ)", "12-26 12:30", "End"]
        ];

        const gridRecurring = document.getElementById('countdown-grid-recurring');
        const gridFixed = document.getElementById('countdown-grid-fixed');
        const chronologyStatusElement = document.getElementById('chronology-status');
        
        // --- 2. ì‹œê°„ ê³„ì‚° ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---
        function parseDate(dateStr) {
            const currentYear = new Date().getFullYear();
            if (dateStr.length < 11) {
                dateStr = currentYear + "-" + dateStr;
            }
            return new Date(dateStr + KST_OFFSET);
        }

        function formatTimeRemaining(ms) {
            if (ms < 0) return `<span class="passed">ì‹œê°„ ì´ˆê³¼</span>`;
            
            const days = Math.floor(ms / (1000 * 60 * 60 * 24));
            const hours = Math.floor((ms % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((ms % (1000 * 60)) / 1000);
            
            const format = (n) => String(n).padStart(2, '0');
            
            if (days > 0) {
                return `${days}ì¼ ${format(hours)}:${format(minutes)}:${format(seconds)}`;
            } else {
                return `${format(hours)}:${format(minutes)}:${format(seconds)}`;
            }
        }

        // --- 3. ì—°ëŒ€ê¸° ìƒíƒœ ê³„ì‚° ë° í‘œì‹œ í•¨ìˆ˜ ---
        function getChronologyStatus(currentTime) {
            let currentPhase = 'KvK ëŒ€ê¸° ì¤‘ ë˜ëŠ” ì‹œì‘ ì „';
            let nextPhase = null;
            let nextPhaseTime = null;
            let foundNext = false;

            for (let i = 0; i < CHRONOLOGY_PHASES.length; i++) {
                const [title, endTimeStr, type] = CHRONOLOGY_PHASES[i];
                const endTime = parseDate(endTimeStr);

                if (currentTime < endTime.getTime()) {
                    // ë‹¤ìŒ ì—°ëŒ€ê¸° ì‹œì‘ ì‹œì  ì°¾ìŒ
                    if (!foundNext) {
                        nextPhase = title;
                        nextPhaseTime = endTime;
                        foundNext = true;
                    }
                    if (i > 0) {
                        // í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì—°ëŒ€ê¸°ë¥¼ ì°¾ê¸° ìœ„í•´ ì´ì „ ì—°ëŒ€ê¸° íƒ€ì´í‹€ ì‚¬ìš©
                        const previousPhaseTime = parseDate(CHRONOLOGY_PHASES[i-1][1]);
                        if (currentTime >= previousPhaseTime.getTime()) {
                            currentPhase = CHRONOLOGY_PHASES[i-1][0];
                        }
                    }
                    
                } else {
                    // ì´ë¯¸ ì§€ë‚œ ì—°ëŒ€ê¸°
                    currentPhase = title; 
                }
            }

            if (!nextPhaseTime) {
                chronologyStatusElement.innerHTML = `<h3>í˜„ì¬ KvK ìƒíƒœ</h3><div class="status-item"><p class="time-left passed">KvKê°€ ëª¨ë‘ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p></div>`;
                return;
            }

            const timeRemainingMs = nextPhaseTime.getTime() - currentTime.getTime();

            chronologyStatusElement.innerHTML = `
                <div class="status-item">
                    <h3>í˜„ì¬ ì—°ëŒ€ê¸°</h3>
                    <p class="time-left" style="font-size: 1.2em; color: #8af7a0;">${currentPhase} ì¤‘</p>
                </div>
                <div class="status-item">
                    <h3>'${nextPhase}' ì¢…ë£Œê¹Œì§€</h3>
                    <p class="time-left" style="color: #ffcc00;">${formatTimeRemaining(timeRemainingMs)}</p>
                    <p class="next-time">ì¢…ë£Œ ì‹œê°: ${nextPhaseTime.toLocaleString('ko-KR', { month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false })}</p>
                </div>
            `;
        }

        // --- 4. ë°˜ë³µ ì´ë²¤íŠ¸ ì¹´ìš´íŠ¸ë‹¤ìš´ ê³„ì‚° ë° í‘œì‹œ í•¨ìˆ˜ ---
        function updateRecurringEvents(currentTime) {
            let htmlContent = '';

            RECURRING_EVENTS.forEach(([title, startTimeStr, recurrenceHours, totalCycles], index) => {
                let nextTime = parseDate(startTimeStr);
                const recurrenceMs = recurrenceHours * 60 * 60 * 1000;
                let cycle = 0;
                
                // í˜„ì¬ íšŒì°¨ ê³„ì‚°
                while (nextTime.getTime() < currentTime.getTime()) {
                    nextTime = new Date(nextTime.getTime() + recurrenceMs);
                    cycle++;
                }
                
                const timeDifference = nextTime.getTime() - currentTime.getTime();
                const cycleNumber = cycle + 1;
                let cycleInfo = `[ ${cycleNumber}íšŒì°¨ / ì´ ${totalCycles}íšŒ ]`;
                
                if (cycleNumber > totalCycles) {
                    cycleInfo = `[ ëª¨ë“  íšŒì°¨ ì™„ë£Œ ]`;
                }

                const countdownHTML = `<div class="countdown">${formatTimeRemaining(timeDifference)}</div>`;
                
                htmlContent += `
                    <div class="event-card">
                        <div class="event-title">${title}</div>
                        <div class="cycle-info">${cycleInfo}</div>
                        ${countdownHTML}
                        <div class="next-time">ë‹¤ìŒ ì˜¤í”ˆ: ${nextTime.toLocaleString('ko-KR', { 
                            month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false 
                        })}</div>
                    </div>
                `;
            });
            gridRecurring.innerHTML = htmlContent;
        }

        // --- 5. ê³ ì • ì´ë²¤íŠ¸ ì¹´ìš´íŠ¸ë‹¤ìš´ ê³„ì‚° ë° í‘œì‹œ í•¨ìˆ˜ ---
        function updateFixedEvents(currentTime) {
            let htmlContent = '';
            
            // Pass ì´ë²¤íŠ¸ì™€ ì£¼ìš” Fixed ì´ë²¤íŠ¸ë§Œ í•„í„°ë§í•˜ì—¬ í‘œì‹œ
            const fixedEvents = CHRONOLOGY_PHASES.filter(
                ([title, endTimeStr, type]) => type === 'Pass' || (type === 'Fixed' && currentTime < parseDate(endTimeStr).getTime())
            ); 

            fixedEvents.slice(0, 5).forEach(([title, endTimeStr, type]) => {
                const endTime = parseDate(endTimeStr);
                const timeDifference = endTime.getTime() - currentTime.getTime();
                
                let countdownHTML = '';
                if (timeDifference < 0) {
                    countdownHTML = `<div class="countdown passed">ì™„ë£Œë¨</div>`;
                } else {
                    countdownHTML = `<div class="countdown">${formatTimeRemaining(timeDifference)}</div>`;
                }
                
                htmlContent += `
                    <div class="event-card">
                        <div class="event-title">${title}</div>
                        ${countdownHTML}
                        <div class="next-time">ì˜ˆì • ì‹œê°: ${endTime.toLocaleString('ko-KR', { 
                            month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false 
                        })}</div>
                    </div>
                `;
            });
            gridFixed.innerHTML = htmlContent;
        }


        // --- 6. ë©”ì¸ ì—…ë°ì´íŠ¸ ë£¨í”„ ---
        function updateDashboard() {
            const currentTime = new Date();
            getChronologyStatus(currentTime);
            updateRecurringEvents(currentTime);
            updateFixedEvents(currentTime);
        }

        updateDashboard();
        setInterval(updateDashboard, 1000); // 1ì´ˆë§ˆë‹¤ ê°±ì‹ 
        // JavaScript ì½”ë“œ ë
    </script>
</body>
</html>
