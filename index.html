<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KVK 1689 WAR ROOM</title>
<style>
    /* === ê¸°ë³¸ ì„¤ì • === */
    body { background-color: #101214; color: #eee; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 10px; text-align: center; }
    
    /* ì‹œê³„ (ì‘ë™ ë³´ì¥) */
    .clock-container {
        background: #1e2328; border: 1px solid #444; color: #ccc;
        padding: 5px 15px; border-radius: 20px; display: inline-block;
        margin-bottom: 15px; font-family: monospace; font-size: 0.9rem;
    }

    .wrap { max-width: 700px; margin: 0 auto; text-align: left; }

    /* === 1. ì™¸êµ === */
    .card { background: #1e2328; border: 1px solid #333; border-radius: 8px; padding: 12px; margin-bottom: 10px; }
    .card-head { font-weight: bold; border-bottom: 1px solid #444; padding-bottom: 6px; margin-bottom: 8px; display: block; color: #66bb6a; }
    
    .diplo-grid { display: flex; gap: 5px; font-size: 0.8rem; }
    .diplo-col { flex: 1; background: rgba(0,0,0,0.2); padding: 8px; border-radius: 5px; }
    .tag { display: inline-block; padding: 2px 6px; border-radius: 3px; font-weight: bold; margin: 2px 0; color: #fff; text-shadow: 1px 1px 1px rgba(0,0,0,0.5); }

    /* === 2. SVG ë¦¬ì–¼ ë§µ (ì§€í˜• ë“œë¡œì‰) === */
    .map-box {
        position: relative; width: 100%; padding-bottom: 75%; /* 4:3 ë¹„ìœ¨ */
        background: #141b21; border-radius: 12px; border: 2px solid #333;
        margin-bottom: 15px; overflow: hidden; box-shadow: inset 0 0 50px #000;
    }
    
    /* ë§µ ë°°ê²½ ê·¸ë¦¬ë“œ */
    .grid-bg {
        position: absolute; width: 100%; height: 100%; opacity: 0.2;
        background-image: linear-gradient(#444 1px, transparent 1px), linear-gradient(90deg, #444 1px, transparent 1px);
        background-size: 30px 30px;
    }

    svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); }
    
    /* ì§€í˜• ìŠ¤íƒ€ì¼ (ìŠ¤í¬ë¦°ìƒ· ìƒ‰ê°) */
    .land { stroke: rgba(255,255,255,0.3); stroke-width: 1; transition: 0.2s; opacity: 0.85; }
    .land:hover { opacity: 1; stroke: #fff; stroke-width: 2; cursor: pointer; }

    /* ê° ì§„ì˜ ìƒ‰ìƒ (ìŠ¤í¬ë¦°ìƒ· ê¸°ë°˜) */
    .fire { fill: #d32f2f; }
    .earth { fill: #ef6c00; }
    .wind { fill: #7b1fa2; }
    .day { fill: #fbc02d; }
    .green { fill: #43a047; }
    .water { fill: #0288d1; }
    .kl { fill: rgba(0,0,0,0.4); stroke: #ffb74d; stroke-width: 2; stroke-dasharray: 5,3; }

    /* ë§µ í…ìŠ¤íŠ¸ */
    text { font-family: sans-serif; text-anchor: middle; pointer-events: none; fill: white; font-weight: bold; text-shadow: 0 2px 3px rgba(0,0,0,0.8); }
    .t-camp { font-size: 14px; fill: #fff; }
    .t-svr { font-size: 10px; fill: #eee; font-weight: normal; font-family: monospace; }
    .t-kl { font-size: 14px; fill: #ffb74d; letter-spacing: 1px; }

    /* === ì¼ì • ë¦¬ìŠ¤íŠ¸ === */
    .sec-h { padding: 10px 15px; background: #2c323a; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; border-left: 4px solid #666; border-radius: 5px; margin-bottom: 5px; font-size: 0.9rem; }
    .sec-b { display: none; padding: 10px; background: #1b2024; border-radius: 5px; margin-bottom: 10px; border: 1px solid #333; }
    .sec-b.on { display: block; }

    .t-disp { text-align: center; background: #111; padding: 8px; border-radius: 5px; margin-bottom: 8px; border: 1px solid #444; }
    .t-val { font-size: 1.4rem; font-weight: bold; font-family: monospace; color: #fff; display: block; margin-top: 2px; }
    
    .row { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #333; font-size: 0.85rem; }
    .row.on { background: rgba(102, 187, 106, 0.15); border-left: 3px solid #66bb6a; }
    .badge { background: #ffb74d; color: #000; padding: 1px 4px; border-radius: 3px; font-size: 0.65rem; margin-left: 5px; }
    .copy-btn { background: #333; border: 1px solid #666; color: #ccc; font-size: 0.7rem; cursor: pointer; border-radius: 3px; margin-left: 8px; }
</style>
</head>
<body>

    <h1 style="color:#ffb74d;">KVK 1689 WAR ROOM</h1>
    <div style="color:#888; font-size:0.8rem; margin-bottom:10px;">Storm of Stratagems (ê³„ì±…ì˜ í­í’)</div>
    
    <div id="real-clock" class="clock-container">Loading...</div>

    <div class="wrap">
        
        <div class="card">
            <span class="card-head">ğŸ¤ Diplomacy</span>
            <div class="diplo-grid">
                <div class="diplo-col" style="border-left:3px solid #66bb6a">
                    <div style="color:#66bb6a; font-weight:bold; margin-bottom:4px;">ğŸ”µ Allies</div>
                    <div>
                        <span class="tag" style="background:#fbc02d; color:#000">Daybreak</span>
                        <span class="tag" style="background:#43a047">Greenwood</span>
                        <span class="tag" style="background:#0277bd">Water</span>
                    </div>
                </div>
                <div class="diplo-col" style="border-left:3px solid #ef5350">
                    <div style="color:#ef5350; font-weight:bold; margin-bottom:4px;">ğŸ”´ Enemies</div>
                    <div>
                        <span class="tag" style="background:#c62828">Fire</span>
                        <span class="tag" style="background:#ef6c00">Earth</span>
                        <span class="tag" style="background:#7b1fa2">Wind</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="map-box">
            <div class="grid-bg"></div>
            <svg viewBox="0 0 1000 750" preserveAspectRatio="none">
                <path class="land fire" d="M 20,20 L 320,20 Q 340,100 320,180 L 170,250 Q 100,200 20,180 Z" />
                <text x="160" y="100" class="t-camp">ğŸ”¥ FIRE</text>
                <text x="160" y="120" class="t-svr">1393, 3253</text>

                <path class="land earth" d="M 330,20 L 670,20 L 680,180 L 500,260 L 320,180 Z" />
                <text x="500" y="100" class="t-camp">â›°ï¸ EARTH</text>
                <text x="500" y="120" class="t-svr">2877, 2620</text>

                <path class="land wind" d="M 680,20 L 980,20 L 980,180 Q 900,200 830,250 L 680,180 Q 660,100 680,20 Z" />
                <text x="840" y="100" class="t-camp">ğŸƒ WIND</text>
                <text x="840" y="120" class="t-svr">1486, 1305</text>

                <path class="land day" d="M 20,730 L 320,730 Q 340,650 320,570 L 170,500 Q 100,550 20,570 Z" />
                <text x="160" y="650" class="t-camp" fill="#000" style="text-shadow:none">â˜€ï¸ DAYBREAK</text>
                <text x="160" y="670" class="t-svr" fill="#222" style="font-weight:bold">1689, 2334</text>

                <path class="land green" d="M 330,730 L 670,730 L 680,570 L 500,490 L 320,570 Z" />
                <text x="500" y="650" class="t-camp">ğŸŒ² GREENWOOD</text>
                <text x="500" y="670" class="t-svr">3155, 2238</text>

                <path class="land water" d="M 680,730 L 980,730 L 980,570 Q 900,550 830,500 L 680,570 Q 660,650 680,730 Z" />
                <text x="840" y="650" class="t-camp">ğŸ’§ WATER</text>
                <text x="840" y="670" class="t-svr">1206, 3530</text>

                <path class="land kl" d="M 350,280 L 650,280 L 650,470 L 350,470 Z" />
                <text x="500" y="380" class="t-kl">KING'S LAND</text>
                <text x="500" y="400" fill="#aaa" font-size="12px">Zone 7</text>
            </svg>
        </div>

        <div class="card" style="border-color:#ffb74d">
            <span class="card-head" style="color:#ffb74d; border:none; margin:0">ğŸ“¢ Notice</span>
            <ul style="padding-left:20px; margin:5px 0 0 0; font-size:0.85rem; color:#ccc;">
                <li>âš”ï¸ Goal: 3ì²œë§Œ í‚¬ (30M Kills)</li>
                <li>ğŸšœ Farming: ììœ  (Free)</li>
                <li>â›” City Hit: ê¸ˆì§€ (No Zeroing)</li>
            </ul>
        </div>

        <div class="sec-h" style="border-left-color:#ef5350" onclick="toggle('s1')">
            <span>ğŸš© Milestones (ì£¼ìš”ì¼ì •)</span><span>â–¼</span>
        </div>
        <div id="s1" class="sec-b on">
            <div id="t-ms" class="t-disp">
                <div id="tt-ms" style="color:#ffb74d; font-weight:bold; margin-bottom:5px">-</div>
                <div id="td-ms" class="t-val">00:00:00</div>
                <button class="copy-btn" onclick="copy('ms')">COPY</button>
            </div>
            <div id="l-ms"></div>
        </div>

        <div class="sec-h" style="border-left-color:#42a5f5" onclick="toggle('s2')">
            <span>ğŸ›ï¸ Ruins (ê³ ëŒ€ìœ ì )</span><span>â–¼</span>
        </div>
        <div id="s2" class="sec-b">
            <div id="t-ru" class="t-disp">
                <div id="tt-ru" style="color:#42a5f5; font-weight:bold; margin-bottom:5px">-</div>
                <div id="td-ru" class="t-val">00:00:00</div>
                <button class="copy-btn" onclick="copy('ru')">COPY</button>
            </div>
            <div id="l-ru"></div>
        </div>

        <div class="sec-h" style="border-left-color:#ab47bc" onclick="toggle('s3')">
            <span>ğŸ”¥ Altar (ì–´ë‘ ì œë‹¨)</span><span>â–¼</span>
        </div>
        <div id="s3" class="sec-b">
            <div id="t-al" class="t-disp">
                <div id="tt-al" style="color:#ab47bc; font-weight:bold; margin-bottom:5px">-</div>
                <div id="td-al" class="t-val">00:00:00</div>
                <button class="copy-btn" onclick="copy('al')">COPY</button>
            </div>
            <div id="l-al"></div>
        </div>

    </div>

    <script>
    // ===== ì•ˆì „í•œ ì‹¤í–‰ì„ ìœ„í•œ ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜ =====
    (function() {
        try {
            // ë‚ ì§œ ë³€í™˜ (ë…„, ì›”, ì¼, ì‹œ, ë¶„ -> UTC Timestamp)
            // KSTëŠ” UTC+9. UTCê¸°ì¤€ìœ¼ë¡œ ë§Œë“¤ë ¤ë©´ -9ì‹œê°„
            function kst(y,m,d,h,min) {
                return Date.UTC(y, m-1, d, h-9, min, 0);
            }

            // ë°ì´í„°
            var DATA = {
                ms: [
                    { k:"4ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 4", t: kst(2025,12,14, 0,10) },
                    { k:"5ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 5", t: kst(2025,12,18, 0,10) },
                    { k:"6ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 6", t: kst(2025,12,20, 0,10) },
                    { k:"í‚¹ìŠ¤ëœë“œ", e:"Kingsland", t: 0 },
                    { k:"KVK ì¢…ë£Œ", e:"End", t: 0 }
                ],
                ruins: { start: kst(2025,12,11, 0,10), gap: 40, cnt: 28 },
                altar: { start: kst(2025,12,22, 0,10), gap: 86, cnt: 10 }
            };

            var TARGETS = { ms:0, ru:0, al:0 };

            function pad(n) { return n<10 ? "0"+n : n; }

            function fmt(ts) {
                if(ts === 0) return "TBA";
                var d = new Date(ts + 9*3600000);
                return "ğŸ‡°ğŸ‡· "+(d.getUTCMonth()+1)+"."+d.getUTCDate()+" "+pad(d.getUTCHours())+":"+pad(d.getUTCMinutes());
            }

            function makeList(cfg, k, e) {
                var arr = [];
                var now = new Date().getTime();
                for(var i=0; i<cfg.cnt; i++) {
                    var t = cfg.start + (i * cfg.gap * 3600000);
                    if(t > now - 7200000) arr.push({k: k+" ("+(i+1)+")", e: e+" #"+(i+1), t:t});
                }
                return arr;
            }

            function draw(key, arr) {
                var el = document.getElementById("l-"+key);
                var tit = document.getElementById("tt-"+key);
                var box = document.getElementById("t-"+key);

                if(arr.length === 0) { el.innerHTML = "<div style='padding:10px; color:#777'>ì¢…ë£Œë¨</div>"; return; }
                
                var next = null;
                for(var i=0; i<arr.length; i++) { if(arr[i].t > 0) { next = arr[i]; break; } }
                TARGETS[key] = next ? next.t : 0;

                if(next) {
                    box.style.display = "block";
                    tit.innerHTML = next.k;
                }

                var h = "";
                for(var j=0; j<arr.length; j++) {
                    var it = arr[j];
                    var cls = (it===next) ? "row on" : "row";
                    var bdg = (it===next) ? "<span class='badge'>NEXT</span>" : "";
                    h += "<div class='"+cls+"'><div><b>"+it.k+"</b>"+bdg+"</div><div style='text-align:right; font-family:monospace; color:#aaa'>"+fmt(it.t)+"</div></div>";
                }
                el.innerHTML = h;
            }

            function tick() {
                var now = new Date().getTime();
                var k = new Date(now + 9*3600000);
                var u = new Date(now);
                
                var ks = k.getUTCFullYear()+"-"+pad(k.getUTCMonth()+1)+"-"+pad(k.getUTCDate())+" "+pad(k.getUTCHours())+":"+pad(k.getUTCMinutes())+":"+pad(k.getUTCSeconds());
                var us = pad(u.getUTCHours())+":"+pad(u.getUTCMinutes())+":"+pad(u.getUTCSeconds());
                
                // ì—¬ê¸° IDê°€ ì¤‘ìš”í•¨: real-clock
                var clockEl = document.getElementById("real-clock");
                if(clockEl) clockEl.innerHTML = "ğŸ‡°ğŸ‡· " + ks + " (KST) | ğŸŒ " + us + " (UTC)";

                upd("ms", now); upd("ru", now); upd("al", now);
            }

            function upd(key, now) {
                var t = TARGETS[key];
                var el = document.getElementById("td-"+key);
                if(!t || t===0 || !el) return;
                var d = t - now;
                if(d<=0) { el.innerHTML = "OPEN!"; el.style.color="#00e676"; }
                else {
                    var h = Math.floor(d/3600000);
                    var m = Math.floor((d%3600000)/60000);
                    var s = Math.floor((d%60000)/1000);
                    el.innerHTML = h + ":" + pad(m) + ":" + pad(s);
                    el.style.color="#fff";
                }
            }

            // ì „ì—­ í•¨ìˆ˜ ì—°ê²°
            window.toggle = function(id) {
                var el = document.getElementById(id);
                el.style.display = (el.style.display==="block") ? "none" : "block";
            }
            
            window.copy = function(key) {
                var t = document.getElementById("tt-"+key).innerText;
                var time = document.getElementById("td-"+key).innerText;
                prompt("Copy:", t + " : " + time);
            }

            // ì‹¤í–‰
            draw("ms", DATA.ms);
            draw("ru", makeList(DATA.ruins, "ê³ ëŒ€ìœ ì ", "Ruins"));
            draw("al", makeList(DATA.altar, "ì–´ë‘ ì œë‹¨", "Altar"));
            setInterval(tick, 1000);
            tick();

        } catch(e) {
            document.body.innerHTML += "<div style='color:red; margin-top:20px'>Error: " + e.message + "</div>";
        }
    })();
    </script>
</body>
</html>
