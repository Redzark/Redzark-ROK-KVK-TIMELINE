<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KVK 1689 WAR ROOM</title>
<style>
    /* === ê¸°ë³¸ ìŠ¤íƒ€ì¼ === */
    body { background-color: #0f1215; color: #e0e0e0; font-family: sans-serif; margin: 0; padding: 10px; text-align: center; }
    
    /* ì‹œê³„ */
    #clock-box { 
        background: #1e2328; border: 1px solid #444; 
        padding: 5px 12px; border-radius: 15px; 
        display: inline-block; margin-bottom: 10px; 
        font-family: monospace; font-size: 0.8rem; color: #bbb;
    }

    .wrap { max-width: 700px; margin: 0 auto; text-align: left; }

    /* === 1. ì™¸êµ (Diplomacy) === */
    .diplomacy-section { background: #1e2328; border: 1px solid #333; border-radius: 8px; padding: 10px; margin-bottom: 10px; }
    .head-title { font-weight: bold; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 8px; display: block; font-size: 0.95rem; color: #66bb6a; }
    
    .diplo-grid { display: flex; gap: 5px; font-size: 0.8rem; }
    .diplo-col { flex: 1; background: rgba(0,0,0,0.2); padding: 8px; border-radius: 5px; }
    .d-label { font-weight: bold; display: block; margin-bottom: 3px; }
    .d-server { display: block; color: #ccc; font-family: monospace; line-height: 1.4; }

    /* === 2. SVG ë¦¬ì–¼ ë§µ (í•µì‹¬) === */
    .map-container {
        position: relative; width: 100%; padding-bottom: 75%; /* 4:3 ë¹„ìœ¨ */
        background: #12181b; border: 2px solid #333; border-radius: 12px;
        margin-bottom: 15px; overflow: hidden; 
        box-shadow: inset 0 0 50px #000;
    }
    
    svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    
    /* êµ¬ì—­ ê³µí†µ ìŠ¤íƒ€ì¼ */
    .zone { stroke: rgba(255,255,255,0.2); stroke-width: 2; transition: opacity 0.3s; opacity: 0.9; }
    .zone:hover { opacity: 1; stroke: #fff; cursor: default; }
    
    /* [ì êµ° - ìœ„ìª½] */
    .z-fire { fill: #d32f2f; } /* ë¹¨ê°• */
    .z-earth { fill: #f57c00; } /* ì£¼í™©/ê°ˆìƒ‰ */
    .z-wind { fill: #7b1fa2; } /* ë³´ë¼ */
    
    /* [ì•„êµ° - ì•„ë˜ìª½] */
    .z-day { fill: #fbc02d; } /* ë…¸ë‘ */
    .z-green { fill: #388e3c; } /* ì´ˆë¡ */
    .z-water { fill: #0288d1; } /* íŒŒë‘ */
    
    /* ì¤‘ë¦½ì§€ëŒ€ & í‚¹ìŠ¤ëœë“œ */
    .z-neutral { fill: #263238; stroke: none; opacity: 0.5; }
    .z-kl { fill: rgba(0,0,0,0.6); stroke: #ffb74d; stroke-width: 3; stroke-dasharray: 5,5; }

    /* í…ìŠ¤íŠ¸ ë¼ë²¨ */
    text { font-family: sans-serif; text-anchor: middle; pointer-events: none; fill: white; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
    .txt-camp { font-weight: bold; font-size: 14px; }
    .txt-svr { font-size: 10px; fill: #eee; font-family: monospace; }
    .txt-kl { font-weight: bold; font-size: 16px; fill: #ffb74d; }
    .txt-role { font-size: 10px; font-weight: bold; }

    /* === ê³µì§€ & ë¦¬ìŠ¤íŠ¸ === */
    .sec-box { border: 1px solid #333; border-radius: 8px; background: #1e2328; margin-bottom: 8px; overflow: hidden; }
    .sec-head { padding: 10px 15px; background: #2c323a; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; border-left: 4px solid #666; font-size: 0.9rem; }
    .sec-body { display: none; padding: 10px; border-top: 1px solid #333; }
    .sec-body.open { display: block; }

    .t-num { font-size: 1.3rem; font-weight: bold; font-family: monospace; color: #fff; display: block; margin: 5px 0; }
    .t-box { background: #121212; padding: 8px; text-align: center; border-radius: 6px; margin-bottom: 5px; border: 1px solid #333; display: none; }
    
    .row { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #333; font-size: 0.85rem; }
    .row.active { background: rgba(102, 187, 106, 0.15); border-left: 3px solid #66bb6a; }
    .r-right { text-align: right; font-family: monospace; color: #aaa; font-size: 0.75rem; }
    .badge { background: #ffb74d; color: #000; padding: 1px 4px; border-radius: 3px; font-size: 0.65rem; margin-left: 5px; font-weight: bold; }
    .copy-btn { background: #333; border: 1px solid #555; color: #ccc; font-size: 0.7rem; cursor: pointer; border-radius: 3px; margin-left: 8px; }

</style>
</head>
<body>

    <h1 style="color:#ffb74d; margin-bottom:5px;">KVK 1689 WAR ROOM</h1>
    <div style="color:#888; font-size:0.8rem; margin-bottom:10px;">Storm of Stratagems (ê³„ì±…ì˜ í­í’)</div>
    <div id="clock-box">Loading...</div>

    <div class="wrap">
        
        <div class="diplomacy-section">
            <span class="head-title">ğŸ¤ Diplomacy (ì™¸êµ)</span>
            <div class="diplo-grid">
                <div class="diplo-col" style="border-left: 3px solid #66bb6a;">
                    <span class="d-label" style="color:#66bb6a">ğŸ”µ Allies (ì•„êµ°)</span>
                    <span class="d-server">Daybreak (1689, 2334)<br>Greenwood (3155, 2238)<br>Water (1206, 3530)</span>
                </div>
                <div class="diplo-col" style="border-left: 3px solid #ef5350;">
                    <span class="d-label" style="color:#ef5350">ğŸ”´ Enemies (ì êµ°)</span>
                    <span class="d-server">Fire (1393, 3253)<br>Earth (2877, 2620)<br>Wind (1486, 1305)</span>
                </div>
            </div>
        </div>

        <div class="map-container">
            <svg viewBox="0 0 1000 750" preserveAspectRatio="xMidYMid slice">
                <rect x="0" y="0" width="1000" height="750" fill="#1a2634" />
                
                <path class="zone z-fire" d="M 20,20 L 320,20 L 320,150 L 170,250 L 20,150 Z" />
                <text x="170" y="100" class="txt-camp">ğŸ”¥ FIRE</text>
                <text x="170" y="120" class="txt-svr">1393, 3253</text>
                <text x="170" y="80" class="txt-role" fill="#ffcdd2">ENEMY</text>

                <path class="zone z-earth" d="M 340,20 L 660,20 L 660,150 L 500,250 L 340,150 Z" />
                <text x="500" y="100" class="txt-camp">â›°ï¸ EARTH</text>
                <text x="500" y="120" class="txt-svr">2877, 2620</text>
                <text x="500" y="80" class="txt-role" fill="#ffccbc">ENEMY</text>

                <path class="zone z-wind" d="M 680,20 L 980,20 L 980,150 L 830,250 L 680,150 Z" />
                <text x="830" y="100" class="txt-camp">ğŸƒ WIND</text>
                <text x="830" y="120" class="txt-svr">1486, 1305</text>
                <text x="830" y="80" class="txt-role" fill="#e1bee7">ENEMY</text>

                <path class="zone z-day" d="M 20,730 L 320,730 L 320,600 L 170,500 L 20,600 Z" />
                <text x="170" y="650" class="txt-camp" fill="#000" style="text-shadow:none">â˜€ï¸ DAYBREAK</text>
                <text x="170" y="670" class="txt-svr" fill="#222" style="font-weight:bold">1689, 2334</text>
                <text x="170" y="630" class="txt-role" fill="#000">ALLY</text>

                <path class="zone z-green" d="M 340,730 L 660,730 L 660,600 L 500,500 L 340,600 Z" />
                <text x="500" y="650" class="txt-camp">ğŸŒ² GREENWOOD</text>
                <text x="500" y="670" class="txt-svr">3155, 2238</text>
                <text x="500" y="630" class="txt-role" fill="#c8e6c9">ALLY</text>

                <path class="zone z-water" d="M 680,730 L 980,730 L 980,600 L 830,500 L 680,600 Z" />
                <text x="830" y="650" class="txt-camp">ğŸ’§ WATER</text>
                <text x="830" y="670" class="txt-svr">1206, 3530</text>
                <text x="830" y="630" class="txt-role" fill="#b3e5fc">ALLY</text>

                <rect x="350" y="300" width="300" height="150" rx="20" class="zone z-kl" />
                <text x="500" y="380" class="txt-kl">KING'S LAND</text>
                <text x="500" y="400" fill="#aaa" font-size="12px">Zone 7</text>

                <line x1="500" y1="250" x2="500" y2="300" stroke="#555" stroke-width="2" stroke-dasharray="4"/>
                <line x1="500" y1="500" x2="500" y2="450" stroke="#555" stroke-width="2" stroke-dasharray="4"/>
            </svg>
        </div>

        <div class="sec-box" style="padding:12px;">
            <span class="head-title" style="color:#ffb74d; border:none; margin:0;">ğŸ“¢ Notice (ê³µì§€)</span>
            <ul style="padding-left:20px; margin:5px 0 0 0; font-size:0.85rem; color:#ccc;">
                <li>âš”ï¸ Goal: 3ì²œë§Œ í‚¬ (30M Kills)</li>
                <li>ğŸšœ Farming: ììœ  (Free)</li>
                <li>â›” City Hit: ê¸ˆì§€ (No Zeroing)</li>
            </ul>
        </div>

        <div class="sec-head" style="border-left:4px solid #ef5350" onclick="toggle('s1')">
            <span>ğŸš© Milestones (ì£¼ìš”ì¼ì •)</span><span>â–¼</span>
        </div>
        <div id="s1" class="sec-body open">
            <div id="t-ms" class="t-box">
                <span id="tt-ms" style="color:#ffb74d; font-weight:bold">-</span>
                <span id="td-ms" class="t-num">00:00:00</span>
                <button class="copy-btn" onclick="copyText('ms')">COPY</button>
            </div>
            <div id="l-ms"></div>
        </div>

        <div class="sec-head" style="border-left:4px solid #42a5f5; margin-top:5px;" onclick="toggle('s2')">
            <span>ğŸ›ï¸ Ruins (ê³ ëŒ€ìœ ì )</span><span>â–¼</span>
        </div>
        <div id="s2" class="sec-body">
            <div id="t-ru" class="t-box">
                <span id="tt-ru" style="color:#42a5f5; font-weight:bold">-</span>
                <span id="td-ru" class="t-num">00:00:00</span>
                <button class="copy-btn" onclick="copyText('ru')">COPY</button>
            </div>
            <div id="l-ru"></div>
        </div>

        <div class="sec-head" style="border-left:4px solid #ab47bc; margin-top:5px;" onclick="toggle('s3')">
            <span>ğŸ”¥ Altar (ì–´ë‘ ì œë‹¨)</span><span>â–¼</span>
        </div>
        <div id="s3" class="sec-body">
            <div id="t-al" class="t-box">
                <span id="tt-al" style="color:#ab47bc; font-weight:bold">-</span>
                <span id="td-al" class="t-num">00:00:00</span>
                <button class="copy-btn" onclick="copyText('al')">COPY</button>
            </div>
            <div id="l-al"></div>
        </div>

    </div>

    <script>
    // ===== ì•ˆì „ì¥ì¹˜ (ES5) =====
    try {
        // ë‚ ì§œ UTC ë³€í™˜ (ë…„,ì›”-1,ì¼,ì‹œ-9,ë¶„)
        function kst(y,m,d,h,min) {
            return Date.UTC(y, m-1, d, h-9, min, 0);
        }

        var DATA = {
            ms: [
                { k:"4ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 4", t: kst(2025,12,14, 0,10) },
                { k:"5ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 5", t: kst(2025,12,18, 0,10) },
                { k:"6ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 6", t: kst(2025,12,20, 0,10) },
                { k:"í‚¹ìŠ¤ëœë“œ", e:"Kingsland", t: 0 },
                { k:"KVK ì¢…ë£Œ", e:"End", t: 0 }
            ],
            ruins: { start: kst(2025,12,11, 0,10), gap: 40, cnt: 28 },
            altar: { start: kst(2025,12,22, 0,10), gap: 86, cnt: 10 }
        };

        var TARGETS = { ms:0, ru:0, al:0 };

        function pad(n) { return n<10 ? "0"+n : n; }

        function fmt(ts) {
            if(ts === 0) return "TBA (ì¶”í›„ì•ˆë‚´)";
            var d = new Date(ts + 9*3600000);
            var u = new Date(ts);
            var k = d.getUTCFullYear()+"."+pad(d.getUTCMonth()+1)+"."+pad(d.getUTCDate())+" "+pad(d.getUTCHours())+":"+pad(d.getUTCMinutes());
            var uk = pad(u.getUTCHours())+":"+pad(u.getUTCMinutes());
            return "ğŸ‡°ğŸ‡· " + k + "<br>ğŸŒ UTC " + uk;
        }

        function makeList(cfg, k, e) {
            var arr = [];
            var now = new Date().getTime();
            for(var i=0; i<cfg.cnt; i++) {
                var t = cfg.start + (i * cfg.gap * 3600000);
                if(t > now - 7200000) {
                    arr.push({k: k + " ("+(i+1)+")", e: e+" #"+(i+1), t:t});
                }
            }
            return arr;
        }

        function draw(key, arr) {
            var el = document.getElementById("l-"+key);
            var box = document.getElementById("t-"+key);
            var tit = document.getElementById("tt-"+key);

            if(arr.length === 0) { el.innerHTML = "<div style='padding:10px; color:#777'>ì¢…ë£Œë¨</div>"; return; }

            var next = null;
            for(var i=0; i<arr.length; i++) {
                if(arr[i].t > 0) { next = arr[i]; break; }
            }
            TARGETS[key] = next ? next.t : 0;

            if(next) {
                box.style.display = "block";
                tit.innerHTML = next.k;
            } else {
                box.style.display = "none";
            }

            var h = "";
            for(var j=0; j<arr.length; j++) {
                var it = arr[j];
                var cls = (it === next) ? "row active" : "row";
                var badge = (it === next) ? "<span class='badge'>NEXT</span>" : "";
                h += "<div class='"+cls+"'><div><b>"+it.k+"</b>"+badge+"<div style='font-size:0.8rem;color:#888'>"+it.e+"</div></div><div class='r-right'>"+fmt(it.t)+"</div></div>";
            }
            el.innerHTML = h;
        }

        function init() {
            draw("ms", DATA.ms);
            draw("ru", makeList(DATA.ruins, "ê³ ëŒ€ìœ ì ", "Ruins"));
            draw("al", makeList(DATA.altar, "ì–´ë‘ ì œë‹¨", "Altar"));
            setInterval(tick, 1000);
            tick();
        }

        function tick() {
            var now = new Date().getTime();
            var k = new Date(now + 9*3600000);
            var u = new Date(now);
            var ks = k.getUTCFullYear()+"-"+pad(k.getUTCMonth()+1)+"-"+pad(k.getUTCDate())+" "+pad(k.getUTCHours())+":"+pad(k.getUTCMinutes())+":"+pad(k.getUTCSeconds());
            var us = pad(u.getUTCHours())+":"+pad(u.getUTCMinutes())+":"+pad(u.getUTCSeconds());
            document.getElementById("clock-box").innerHTML = "ğŸ‡°ğŸ‡· " + ks + " (KST) | ğŸŒ " + us + " (UTC)";

            upd("ms", now);
            upd("ru", now);
            upd("al", now);
        }

        function upd(key, now) {
            var t = TARGETS[key];
            var el = document.getElementById("td-"+key);
            if(!t || t===0) return;
            var d = t - now;
            if(d <= 0) {
                el.innerHTML = "OPEN NOW!";
                el.style.color = "#00e676";
            } else {
                var s = Math.floor((d/1000)%60);
                var m = Math.floor((d/60000)%60);
                var h = Math.floor((d/3600000)%24);
                var dd = Math.floor(d/86400000);
                el.innerHTML = dd+"d "+pad(h)+":"+pad(m)+":"+pad(s);
                el.style.color = "#fff";
            }
        }

        window.toggle = function(id) {
            var el = document.getElementById(id);
            el.style.display = (el.style.display === "block") ? "none" : "block";
        }

        window.copyText = function(key) {
            var t = document.getElementById("tt-"+key).innerText;
            var time = document.getElementById("td-"+key).innerText;
            var txt = "[1689 KVK] " + t + " : " + time + " ë‚¨ìŒ";
            prompt("ë³µì‚¬í•˜ì„¸ìš”:", txt);
        }

        init();

    } catch(e) {
        document.body.innerHTML += "<div style='color:red;'>ERROR: "+e.message+"</div>";
    }
    </script>
</body>
</html>
