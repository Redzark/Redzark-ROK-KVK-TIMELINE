<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1689ì„œë²„ ì‹ ê¸°ë¬˜ì‚° KVK íƒ€ì„ë¼ì¸</title>
    <style>
        /* CSS ìŠ¤íƒ€ì¼ ì‹œì‘ (ë””ìì¸ ìœ ì§€) */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #16182a; 
            color: #ffffff;
            margin: 0;
            padding: 30px 10px;
            text-align: center;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
        }
        h1 {
            color: #ff3859; 
            margin-bottom: 5px;
            font-size: 2.2em;
        }
        h2 {
            color: #b0b0b0;
            font-size: 1.1em;
            margin-bottom: 30px;
        }
        .status-header {
            background-color: #33395b;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: space-around;
        }
        .status-item {
            flex-basis: 48%;
            text-align: left;
            padding: 0 10px;
        }
        .status-item h3 {
            color: #ffcc00; 
            margin: 0 0 5px 0;
            font-size: 1.2em;
        }
        .status-item .time-left {
            font-size: 1.8em;
            font-weight: bold;
            color: #fff;
        }

        .section-title {
            color: #4CAF50;
            font-size: 1.8em;
            margin-top: 40px;
            margin-bottom: 20px;
            border-bottom: 2px solid #33395b;
            padding-bottom: 5px;
        }

        /* ì´ë²¤íŠ¸ ì¹´ë“œ ê·¸ë¦¬ë“œ */
        .event-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }
        .event-card {
            background-color: #2a2a4a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .event-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #8af7a0; 
            margin-bottom: 5px;
        }
        .countdown {
            font-size: 2em;
            font-weight: 700;
            color: #ffcc00; 
            letter-spacing: 1px;
            margin-top: 5px;
        }
        .next-time {
            font-size: 0.8em;
            color: #aaa;
            margin-top: 5px;
        }
        .cycle-info {
            font-size: 0.9em;
            color: #ff8c00; 
            font-weight: 600;
            margin-top: 5px;
        }
        .passed {
            color: #ff5757;
            font-size: 1.1em;
        }
        /* CSS ìŠ¤íƒ€ì¼ ë */
    </style>
</head>
<body>
    <div class="container">
        <h1>1689ì„œë²„ ì‹ ê¸°ë¬˜ì‚° KVK íƒ€ì„ë¼ì¸</h1> 
        <h2>[ KvK ì‹ ê¸°ë¬˜ì‚° | ì„œë²„ 1689 ]</h2>
        
        <div class="status-header" id="chronology-status">
            </div>

        <div class="section-title">ğŸ”‘ ë‹¤ìŒ ê´€ë¬¸ ì˜¤í”ˆ ë° ì£¼ìš” ì´ë²¤íŠ¸ê¹Œì§€ ë‚¨ì€ ì‹œê°„</div>
        <div class="event-grid" id="countdown-grid-fixed">
            </div>

        <div class="section-title">ğŸ” ë°˜ë³µ ì´ë²¤íŠ¸ ë‚¨ì€ ì‹œê°„ (íšŒì°¨ í‘œì‹œ)</div>
        <div class="event-grid" id="countdown-grid-recurring">
            </div>
    </div>

    <script>
        // JavaScript ì½”ë“œ ì‹œì‘

        // ----------------------------------------------------
        // [1] ì „ì—­ ìƒìˆ˜ ë° ë°ì´í„° ì„¤ì •
        // ----------------------------------------------------
        const KST_OFFSET = ":00 +09:00"; 
        
        // 1-A. ë°˜ë³µ ì´ë²¤íŠ¸ ëª©ë¡ (íí—ˆ/ì œë‹¨)
        const RECURRING_EVENTS = [
            // [ì´ë¦„, ì²« ì‹œì‘ ì‹œê° (YYYY-MM-DD HH:MM), ì£¼ê¸° (ì‹œê°„), ì´ íšŸìˆ˜]
            ["íí—ˆ", "2025-12-11 00:10", 40, 28], 
            ["ì œë‹¨", "2025-12-22 00:10", 86, 10], 
        ];
        
        // ì—°ëŒ€ê¸° ë‚ ì§œ ê³ ì •ìš© ì—°ë„ ì¶”ì¶œ
        const KVK_YEAR = RECURRING_EVENTS[0][1].substring(0, 4); 

        // 1-B. ì—°ëŒ€ê¸° ì „ì²´ ëª©ë¡ ë° ì£¼ìš” ê³ ì • ì´ë²¤íŠ¸ (ëª¨ë“  ì‹œê°„ì€ 'ì‹œì‘ ì‹œê°„')
        const CHRONOLOGY_PHASES = [
            // [ì´ë¦„, ì‹œì‘ ì‹œê° (MM-DD HH:MM), íƒ€ì…]
            ["ì²«ê±¸ìŒ", "12-05 12:30", "Phase"],
            ["ì›ì •êµ° ì£¼ë‘”ì§€ ê°œë°©", "12-06 00:30", "Fixed"],
            ["ëˆˆì—ëŠ” ëˆˆ", "12-07 12:30", "Phase"],
            ["ì§„ì˜ ìš”ìƒˆ ê°œë°©", "12-08 00:30", "Fixed"],
            ["ìš”ì§€ì˜ ì „ìŸ", "12-08 12:30", "Phase"],
            ["í˜‘ë ¥", "12-10 12:30", "Phase"],
            ["íí—ˆ ì˜¤í”ˆ ì‹œì‘", "12-11 00:30", "Fixed"], 
            ["ì§•ë²Œ", "12-11 12:30", "Phase"],
            ["ë³µìˆ˜ (ì¹´ë“œì§‘ +1)", "12-13 12:30", "Phase"],
            ["4ê´€ë¬¸ ì¼ë¶€ ê°œë°©", "12-14 00:30", "Pass"], 
            ["ë¨¹êµ¬ë¦„ (êµ°ë‹¨ +1)", "12-14 12:30", "Phase"],
            ["ëŠ‘ëŒ€ì™€ ì™•", "12-15 12:30", "Phase"],
            ["ì‹ ì „ ê°œë°©", "12-16 00:30", "Fixed"],
            ["ìˆœë¡€", "12-17 12:30", "Phase"],
            ["5ê´€ë¬¸ ì¼ë¶€ ê°œë°©", "12-18 00:30", "Pass"], 
            ["ì „ì§„", "12-18 12:30", "Phase"],
            ["ì„±ì „ ê°œë°©", "12-19 00:30", "Fixed"],
            ["ì„±ì „ ì ë ¹ (êµ°ë‹¨ +1)", "12-19 12:30", "Phase"],
            ["6ê´€ë¬¸ ì¼ë¶€ ê°œë°©", "12-20 00:30", "Pass"], 
            ["ì ‘ì „ í—ˆê°€", "12-21 12:30", "Phase"],
            ["ì œë‹¨ ì˜¤í”ˆ ì‹œì‘", "12-22 00:30", "Fixed"], 
            ["í¬ìƒì (12ì•¼ë„)", "12-22 12:30", "Phase"],
            ["ê°ˆë“±ê³¼ ë¶„ìŸ", "12-24 12:30", "Phase"],
            ["ë‹¨í•©ì˜ ì¥ (KvK ì¢…ë£Œ)", "12-26 12:30", "Phase"] 
        ];
        
        // ----------------------------------------------------
        // [2] DOM ìš”ì†Œ ì •ì˜ (ë³€ìˆ˜ ì ‘ê·¼ ì˜¤ë¥˜ ë°©ì§€)
        // ----------------------------------------------------
        const gridRecurring = document.getElementById('countdown-grid-recurring');
        const gridFixed = document.getElementById('countdown-grid-fixed');
        const chronologyStatusElement = document.getElementById('chronology-status');

        
        // ----------------------------------------------------
        // [3] ì‹œê°„ ê³„ì‚° ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
        // ----------------------------------------------------
        // KVK_YEARë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ë‚ ì§œë¥¼ ë™ì¼í•œ ì—°ë„ì— ê³ ì •í•©ë‹ˆë‹¤.
        function parseDate(dateStr) {
            let dateToParse = dateStr;
            if (dateStr.length < 11) { 
                dateToParse = KVK_YEAR + "-" + dateStr;
            }
            return new Date(dateToParse + KST_OFFSET);
        }

        // ë‚¨ì€ ì‹œê°„ì„ Dì¼ HH:MM:SS í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        function formatTimeRemaining(ms) {
            if (ms < 0) return `<span class="passed">ì´ë¯¸ ì‹œì‘ë¨</span>`;
            
            const days = Math.floor(ms / (1000 * 60 * 60 * 24));
            const hours = Math.floor((ms % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((ms % (1000 * 60)) / 1000);
            
            const format = (n) => String(n).padStart(2, '0');
            
            if (days > 0) {
                return `${days}ì¼ ${format(hours)}:${format(minutes)}:${format(seconds)}`;
            } else {
                return `${format(hours)}:${format(minutes)}:${format(seconds)}`;
            }
        }

        // ----------------------------------------------------
        // [4] í•µì‹¬ ë¡œì§: ì—°ëŒ€ê¸° ìƒíƒœ ê³„ì‚° ë° í‘œì‹œ í•¨ìˆ˜
        // ----------------------------------------------------
        function getChronologyStatus(currentTime) {
            let currentPhase = 'KvK ì‹œì‘ ì „';
            let nextPhase = null;
            let nextPhaseTime = null;
            let lastPhaseTitle = ''; 

            for (let i = 0; i < CHRONOLOGY_PHASES.length; i++) {
                const [title, startTimeStr, type] = CHRONOLOGY_PHASES[i]; 
                const startTime = parseDate(startTimeStr);

                if (currentTime >= startTime.getTime()) {
                    // ì´ ì´ë²¤íŠ¸ëŠ” ì‹œì‘ë˜ì—ˆìœ¼ë¯€ë¡œ, í˜„ì¬ í™œì„± ì—°ëŒ€ê¸°ë¡œ ê¸°ë¡
                    lastPhaseTitle = title;
                } else {
                    // ë‹¤ìŒ ì‹œì‘í•  ì´ë²¤íŠ¸ë¥¼ ì°¾ìŒ (ê°€ì¥ ë¹ ë¥¸ ë¯¸ë˜ ì‹œê°„)
                    if (!nextPhase) {
                        nextPhase = title;
                        nextPhaseTime = startTime;
                    }
                }
            }
            
            // í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì—°ëŒ€ê¸°ë¥¼ ì„¤ì •
            if (lastPhaseTitle) {
                 currentPhase = lastPhaseTitle;
            }

            // KvK ì¢…ë£Œ ìƒíƒœ ì²´í¬ (ë§ˆì§€ë§‰ ì´ë²¤íŠ¸ ì‹œì‘ ì‹œê°„ ì´í›„ì¸ì§€ í™•ì¸)
            const lastEventTime = parseDate(CHRONOLOGY_PHASES[CHRONOLOGY_PHASES.length - 1][1]);
            if (currentTime >= lastEventTime.getTime()) {
                 chronologyStatusElement.innerHTML = `<h3>í˜„ì¬ ì—°ëŒ€ê¸°</h3><div class="status-item"><p class="time-left passed">KvKê°€ ëª¨ë‘ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p></div>`;
                 return;
            }
            
            // ë‹¤ìŒ ì´ë²¤íŠ¸ê°€ ì—†ìœ¼ë©´ (í˜„ì¬ KvK ì¢…ë£Œ ì—°ëŒ€ê¸° ì§„í–‰ ì¤‘) ë§ˆì§€ë§‰ ì´ë²¤íŠ¸ë¥¼ ë‹¤ìŒ ì´ë²¤íŠ¸ë¡œ ì„¤ì •
            if (!nextPhase) {
                nextPhase = 'KvK ìµœì¢… ì¢…ë£Œ';
                nextPhaseTime = lastEventTime;
            }
            
            const timeRemainingMs = nextPhaseTime.getTime() - currentTime.getTime();

            chronologyStatusElement.innerHTML = `
                <div class="status-item">
                    <h3>í˜„ì¬ ì—°ëŒ€ê¸°</h3>
                    <p class="time-left" style="font-size: 1.2em; color: #8af7a0;">${currentPhase}</p>
                </div>
                <div class="status-item">
                    <h3>'${nextPhase}' ì‹œì‘ê¹Œì§€</h3>
                    <p class="time-left" style="color: #ffcc00;">${formatTimeRemaining(timeRemainingMs)}</p>
                    <p class="next-time">ì‹œì‘ ì‹œê°: ${nextPhaseTime.toLocaleString('ko-KR', { month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false })}</p>
                </div>
            `;
        }

        // ----------------------------------------------------
        // [5] í•µì‹¬ ë¡œì§: ë°˜ë³µ ì´ë²¤íŠ¸ ì¹´ìš´íŠ¸ë‹¤ìš´
        // ----------------------------------------------------
        function updateRecurringEvents(currentTime) {
            let htmlContent = '';

            RECURRING_EVENTS.forEach(([title, startTimeStr, recurrenceHours, totalCycles], index) => {
                let nextTime = parseDate(startTimeStr);
                const recurrenceMs = recurrenceHours * 60 * 60 * 1000;
                let cycle = 0;
                
                // í˜„ì¬ íšŒì°¨ ê³„ì‚°
                while (nextTime.getTime() < currentTime.getTime()) {
                    nextTime = new Date(nextTime.getTime() + recurrenceMs);
                    cycle++;
                }
                
                const timeDifference = nextTime.getTime() - currentTime.getTime();
                const cycleNumber = cycle + 1;
                let cycleInfo = `[ ${cycleNumber}íšŒì°¨ / ì´ ${totalCycles}íšŒ ]`;
                
                if (cycleNumber > totalCycles) {
                    cycleInfo = `[ ëª¨ë“  íšŒì°¨ ì™„ë£Œ ]`;
                    htmlContent += `
                        <div class="event-card">
                            <div class="event-title">${title}</div>
                            <div class="cycle-info">${cycleInfo}</div>
                            <div class="countdown passed">ì¢…ë£Œë¨</div>
                            <div class="next-time"></div>
                        </div>
                    `;
                    return; 
                }

                const countdownHTML = `<div class="countdown">${formatTimeRemaining(timeDifference)}</div>`;
                
                htmlContent += `
                    <div class="event-card">
                        <div class="event-title">${title}</div>
                        <div class="cycle-info">${cycleInfo}</div>
                        ${countdownHTML}
                        <div class="next-time">ë‹¤ìŒ ì˜¤í”ˆ: ${nextTime.toLocaleString('ko-KR', { 
                            month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false 
                        })}</div>
                    </div>
                `;
            });
            gridRecurring.innerHTML = htmlContent;
        }

        // ----------------------------------------------------
        // [6] í•µì‹¬ ë¡œì§: ê³ ì • ì´ë²¤íŠ¸ ì¹´ìš´íŠ¸ë‹¤ìš´ (ë‹¤ê°€ì˜¬ ì´ë²¤íŠ¸ë§Œ)
        // ----------------------------------------------------
        function updateFixedEvents(currentTime) {
            let htmlContent = '';
            
            // 'Pass' ì´ë²¤íŠ¸(ê´€ë¬¸)ì™€ 'Fixed' ì´ë²¤íŠ¸ ì¤‘, ì•„ì§ ì‹œì‘í•˜ì§€ ì•Šì€ ì´ë²¤íŠ¸ë§Œ í•„í„°ë§
            const upcomingFixedEvents = CHRONOLOGY_PHASES.filter(
                ([title, startTimeStr, type]) => (type === 'Pass' || type === 'Fixed') && currentTime < parseDate(startTimeStr).getTime()
            ); 

            // ë‹¤ê°€ì˜¬ 5ê°œ ì´ë²¤íŠ¸ë§Œ í‘œì‹œ
            upcomingFixedEvents.slice(0, 5).forEach(([title, startTimeStr, type]) => {
                const startTime = parseDate(startTimeStr);
                const timeDifference = startTime.getTime() - currentTime.getTime();
                
                const countdownHTML = `<div class="countdown">${formatTimeRemaining(timeDifference)}</div>`;
                
                htmlContent += `
                    <div class="event-card">
                        <div class="event-title">${title}</div>
                        ${countdownHTML}
                        <div class="next-time">ì˜ˆì • ì‹œê°: ${startTime.toLocaleString('ko-KR',
