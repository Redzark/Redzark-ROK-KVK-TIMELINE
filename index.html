<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KVK 1689 TACTICAL MAP</title>
<style>
    /* === ê¸°ë³¸ í…Œë§ˆ: ë‹¤í¬ ëª¨ë“œ === */
    body { background-color: #0b0e11; color: #c9d1d9; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 10px; text-align: center; }
    
    /* í—¤ë” */
    h1 { color: #ffb74d; margin: 5px 0; font-size: 1.5rem; letter-spacing: 1px; text-transform: uppercase; }
    .sub { color: #8b949e; font-size: 0.8rem; margin-bottom: 15px; }

    /* ì‹œê³„ ë°•ìŠ¤ */
    #clock-box { 
        background: #161b22; border: 1px solid #30363d; 
        padding: 6px 16px; border-radius: 20px; 
        display: inline-block; margin-bottom: 15px; 
        font-family: monospace; font-size: 0.95rem; color: #e0e0e0;
        box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }

    .wrap { max-width: 720px; margin: 0 auto; text-align: left; }

    /* === 1. ì™¸êµ í˜„í™©íŒ === */
    .card { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 12px; margin-bottom: 15px; }
    .diplo-grid { display: flex; gap: 10px; }
    
    /* ì•„êµ° íŒ¨ë„ */
    .col-ally { flex: 1; background: rgba(46, 160, 67, 0.1); border: 1px solid #238636; border-radius: 6px; padding: 8px; }
    .head-ally { color: #3fb950; font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; display: block; }
    
    /* ì êµ° íŒ¨ë„ */
    .col-enemy { flex: 1; background: rgba(218, 54, 51, 0.1); border: 1px solid #da3633; border-radius: 6px; padding: 8px; }
    .head-enemy { color: #f85149; font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; display: block; }

    .tag { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; color: #fff; margin: 2px; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }

    /* === 2. ì „ìˆ  ì§€ë„ (SVG) === */
    .map-box {
        position: relative; width: 100%; padding-bottom: 65%; 
        background: #0d1117; border-radius: 12px; border: 2px solid #30363d;
        margin-bottom: 15px; overflow: hidden;
        box-shadow: inset 0 0 80px #000;
    }
    
    svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

    /* === [ì¤‘ìš”] í”¼ì•„ì‹ë³„ ìŠ¤íƒ€ì¼ === */
    /* ì êµ° ì˜í†  (ìœ„ìª½) */
    .zone-enemy {
        stroke: #f85149; stroke-width: 2px;
        opacity: 0.8; transition: 0.3s;
        filter: drop-shadow(0 0 5px rgba(248, 81, 73, 0.3));
    }
    .zone-enemy:hover { opacity: 1; stroke-width: 3px; fill-opacity: 0.9; cursor: pointer; }

    /* ì•„êµ° ì˜í†  (ì•„ë˜ìª½) */
    .zone-ally {
        stroke: #3fb950; stroke-width: 2px;
        opacity: 0.9; transition: 0.3s;
        filter: drop-shadow(0 0 5px rgba(63, 185, 80, 0.3));
    }
    .zone-ally:hover { opacity: 1; stroke-width: 3px; fill-opacity: 1; cursor: pointer; }

    /* í‚¹ìŠ¤ëœë“œ */
    .zone-kl { fill: rgba(0,0,0,0.3); stroke: #ffb74d; stroke-width: 2; stroke-dasharray: 6,4; }

    /* í…ìŠ¤íŠ¸ ë¼ë²¨ */
    text { font-family: 'Segoe UI', sans-serif; text-anchor: middle; pointer-events: none; fill: white; text-shadow: 0 2px 4px rgba(0,0,0,1); }
    .nm { font-weight: bold; font-size: 14px; }
    .sv { font-size: 10px; fill: #ccc; font-family: monospace; }
    .rl { font-size: 10px; font-weight: bold; letter-spacing: 1px; }

    /* ìƒ‰ìƒ ì±„ìš°ê¸° */
    .fill-fire { fill: #8a1c1c; }   /* ì êµ°: ì–´ë‘ìš´ ë¹¨ê°• */
    .fill-earth { fill: #9e5416; }  /* ì êµ°: ì–´ë‘ìš´ ì£¼í™© */
    .fill-wind { fill: #5e2a84; }   /* ì êµ°: ì–´ë‘ìš´ ë³´ë¼ */
    
    .fill-day { fill: #d4a017; }    /* ì•„êµ°: ë°ì€ ë…¸ë‘ */
    .fill-green { fill: #2ea043; }  /* ì•„êµ°: ë°ì€ ì´ˆë¡ */
    .fill-water { fill: #1f6feb; }  /* ì•„êµ°: ë°ì€ íŒŒë‘ */

    /* === ì¼ì • ë¦¬ìŠ¤íŠ¸ === */
    .sec-h { padding: 10px 15px; background: #21262d; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; border-left: 4px solid #666; border-radius: 6px; margin-bottom: 5px; font-size: 0.9rem; border: 1px solid #30363d; border-left-width: 4px; }
    .sec-b { display: none; padding: 10px; background: #161b22; border-radius: 6px; border: 1px solid #30363d; margin-bottom: 10px; }
    .sec-b.on { display: block; }

    .t-disp { text-align: center; background: #0d1117; padding: 8px; border-radius: 6px; margin-bottom: 5px; border: 1px solid #30363d; display: none; }
    .t-val { font-size: 1.4rem; font-weight: bold; font-family: monospace; color: #fff; margin-top: 2px; display: block; }
    
    .row { display: flex; justify-content: space-between; padding: 8px 5px; border-bottom: 1px solid #21262d; font-size: 0.85rem; }
    .row.active { background: rgba(46, 160, 67, 0.15); border-left: 3px solid #3fb950; }
    .copy-btn { background: #21262d; border: 1px solid #30363d; color: #8b949e; font-size: 0.7rem; cursor: pointer; border-radius: 4px; margin-left: 10px; padding: 2px 8px; }

</style>
</head>
<body>

    <h1>KVK 1689 WAR ROOM</h1>
    <div class="sub">Storm of Stratagems (ê³„ì±…ì˜ í­í’)</div>
    
    <div id="clock-box">System Initializing...</div>

    <div class="wrap">
        
        <div class="card">
            <div class="diplo-grid">
                <div class="col-ally">
                    <span class="head-ally">ğŸ”µ ì•„êµ° (ALLIES)</span>
                    <span class="tag" style="background:#d4a017; color:#000">Daybreak</span>
                    <span class="tag" style="background:#2ea043">Greenwood</span>
                    <span class="tag" style="background:#1f6feb">Water</span>
                </div>
                <div class="col-enemy">
                    <span class="head-enemy">ğŸ”´ ì êµ° (ENEMIES)</span>
                    <span class="tag" style="background:#8a1c1c">Fire</span>
                    <span class="tag" style="background:#9e5416">Earth</span>
                    <span class="tag" style="background:#5e2a84">Wind</span>
                </div>
            </div>
        </div>

        <div class="map-box">
            <svg viewBox="0 0 1000 650" preserveAspectRatio="none">
                
                <path class="zone-enemy fill-fire" d="M 20,20 L 330,20 Q 350,100 330,190 Q 250,220 180,240 Q 100,210 20,190 Z" />
                <text x="175" y="100" class="nm">ğŸ”¥ FIRE</text>
                <text x="175" y="120" class="sv">1393, 3253</text>
                <text x="175" y="80" class="rl" fill="#f85149">ENEMY</text>

                <path class="zone-enemy fill-earth" d="M 340,20 L 660,20 L 670,50 Q 650,150 670,210 Q 600,250 500,260 Q 400,250 330,210 Q 350,150 330,50 Z" />
                <text x="500" y="100" class="nm">â›°ï¸ EARTH</text>
                <text x="500" y="120" class="sv">2877, 2620</text>
                <text x="500" y="80" class="rl" fill="#f85149">ENEMY</text>

                <path class="zone-enemy fill-wind" d="M 670,20 L 980,20 L 980,190 Q 900,210 820,240 Q 750,220 670,190 Q 650,100 670,20 Z" />
                <text x="825" y="100" class="nm">ğŸƒ WIND</text>
                <text x="825" y="120" class="sv">1486, 1305</text>
                <text x="825" y="80" class="rl" fill="#f85149">ENEMY</text>

                <path class="zone-ally fill-day" d="M 20,630 L 330,630 Q 350,550 330,460 Q 250,430 180,410 Q 100,440 20,460 Z" />
                <text x="175" y="520" class="nm" fill="#000" style="text-shadow:none">â˜€ï¸ DAYBREAK</text>
                <text x="175" y="540" class="sv" fill="#222" style="font-weight:bold">1689, 2334</text>
                <text x="175" y="500" class="rl" fill="#000">ALLY</text>

                <path class="zone-ally fill-green" d="M 340,630 L 660,630 L 670,600 Q 650,500 670,440 Q 600,400 500,390 Q 400,400 330,440 Q 350,500 330,600 Z" />
                <text x="500" y="520" class="nm">ğŸŒ² GREENWOOD</text>
                <text x="500" y="540" class="sv">3155, 2238</text>
                <text x="500" y="500" class="rl" fill="#aaffaa">ALLY</text>

                <path class="zone-ally fill-water" d="M 670,630 L 980,630 L 980,460 Q 900,440 820,410 Q 750,430 670,460 Q 650,550 670,630 Z" />
                <text x="825" y="520" class="nm">ğŸ’§ WATER</text>
                <text x="825" y="540" class="sv">1206, 3530</text>
                <text x="825" y="500" class="rl" fill="#aaddff">ALLY</text>

                <path class="zone-kl" d="M 360,280 L 640,280 L 640,370 L 360,370 Z" />
                <text x="500" y="335" class="nm" fill="#ffb74d" style="font-size:18px">KING'S LAND</text>
                <text x="500" y="355" fill="#aaa" font-size="12px">Zone 7</text>
            </svg>
        </div>

        <div class="card" style="border-left: 4px solid #ffb74d;">
            <div style="font-weight:bold; color:#ffb74d; margin-bottom:5px;">ğŸ“¢ Notice</div>
            <ul style="padding-left:20px; margin:0; font-size:0.85rem; color:#8b949e;">
                <li>âš”ï¸ Goal: 3ì²œë§Œ í‚¬ (30M Kills)</li>
                <li>ğŸšœ Farming: ììœ  (Free)</li>
                <li>â›” City Hit: ê¸ˆì§€ (No Zeroing)</li>
            </ul>
        </div>

        <div class="sec-h" onclick="toggle('s1')" style="border-left-color:#ef5350">
            <span>ğŸš© Milestones (ì£¼ìš”ì¼ì •)</span><span>â–¼</span>
        </div>
        <div id="s1" class="sec-b on">
            <div id="tb-ms" class="t-disp">
                <div id="tt-ms" style="color:#ffb74d; font-weight:bold; margin-bottom:5px">-</div>
                <div id="td-ms" class="t-val">00:00:00</div>
                <button class="copy-btn" onclick="copy('ms')">COPY</button>
            </div>
            <div id="l-ms"></div>
        </div>

        <div class="sec-h" style="border-left-color:#42a5f5" onclick="toggle('s2')">
            <span>ğŸ›ï¸ Ruins (ê³ ëŒ€ìœ ì )</span><span>â–¼</span>
        </div>
        <div id="s2" class="sec-b">
            <div id="tb-ru" class="t-disp">
                <div id="tt-ru" style="color:#42a5f5; font-weight:bold; margin-bottom:5px">-</div>
                <div id="td-ru" class="t-val">00:00:00</div>
                <button class="copy-btn" onclick="copy('ru')">COPY</button>
            </div>
            <div id="l-ru"></div>
        </div>

        <div class="sec-h" style="border-left-color:#ab47bc" onclick="toggle('s3')">
            <span>ğŸ”¥ Altar (ì–´ë‘ ì œë‹¨)</span><span>â–¼</span>
        </div>
        <div id="s3" class="sec-b">
            <div id="tb-al" class="t-disp">
                <div id="tt-al" style="color:#ab47bc; font-weight:bold; margin-bottom:5px">-</div>
                <div id="td-al" class="t-val">00:00:00</div>
                <button class="copy-btn" onclick="copy('al')">COPY</button>
            </div>
            <div id="l-al"></div>
        </div>

    </div>

    <script>
    (function(){
        function kst(y,m,d,h,min) { return Date.UTC(y, m-1, d, h-9, min, 0); }

        var DATA = {
            ms: [
                {k:"4ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 4", t: kst(2025,12,14, 0,10)},
                {k:"5ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 5", t: kst(2025,12,18, 0,10)},
                {k:"6ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 6", t: kst(2025,12,20, 0,10)},
                {k:"í‚¹ìŠ¤ëœë“œ", e:"Kingsland", t: 0},
                {k:"KVK ì¢…ë£Œ", e:"End", t: 0}
            ],
            ruins: { start: kst(2025,12,11, 0,10), gap: 40, cnt: 28 },
            altar: { start: kst(2025,12,22, 0,10), gap: 86, cnt: 10 }
        };

        var TARGETS = { ms:0, ru:0, al:0 };

        function pad(n) { return n<10 ? "0"+n : n; }
        function fmt(ts) {
            if(ts===0) return "TBA";
            var d = new Date(ts + 9*3600000);
            return (d.getUTCMonth()+1)+"."+d.getUTCDate()+" "+pad(d.getUTCHours())+":"+pad(d.getUTCMinutes());
        }

        function makeList(cfg, k, e) {
            var arr = [];
            var now = new Date().getTime();
            for(var i=0; i<cfg.cnt; i++) {
                var t = cfg.start + (i * cfg.gap * 3600000);
                if(t > now - 7200000) arr.push({k: k+" ("+(i+1)+")", e: e+" #"+(i+1), t:t});
            }
            return arr;
        }

        function draw(key, arr) {
            var el = document.getElementById("l-"+key);
            if(arr.length === 0) { el.innerHTML = "ì¢…ë£Œ"; return; }
            
            var now = new Date().getTime();
            var next = null;
            // ë¯¸ë˜ ì¼ì • ì¤‘ ê°€ì¥ ë¹ ë¥¸ ê²ƒ ì°¾ê¸°
            for(var i=0; i<arr.length; i++) {
                if(arr[i].t > now) { next = arr[i]; break; }
            }
            // ì—†ë‹¤ë©´ TBA(0) ì°¾ê¸°
            if(!next) {
                for(var i=0; i<arr.length; i++) { if(arr[i].t === 0) { next = arr[i]; break; } }
            }

            TARGETS[key] = next ? next.t : 0;

            if(next && next.t > 0) {
                document.getElementById("tb-"+key).style.display = "block";
                document.getElementById("tt-"+key).innerHTML = next.k;
            } else {
                document.getElementById("tb-"+key).style.display = "none";
            }

            var h = "";
            for(var j=0; j<arr.length; j++) {
                var it = arr[j];
                var isNext = (it === next);
                var cls = isNext ? "row active" : "row";
                var bdg = isNext ? "<span class='badge' style='background:#ffb74d;color:#000;font-weight:bold;margin-left:5px;border-radius:3px;font-size:0.7rem'>NEXT</span>" : "";
                var st = (it.t < now && it.t !== 0) ? "opacity:0.5" : "";
                h += "<div class='"+cls+"' style='"+st+"'><div><b>"+it.k+"</b>"+bdg+"</div><div style='text-align:right; font-family:monospace; color:#aaa; font-size:0.75rem'>"+fmt(it.t)+"</div></div>";
            }
            el.innerHTML = h;
        }

        function tick() {
            var now = new Date().getTime();
            var k = new Date(now + 9*3600000);
            var ks = k.getUTCFullYear()+"-"+pad(k.getUTCMonth()+1)+"-"+pad(k.getUTCDate())+" "+pad(k.getUTCHours())+":"+pad(k.getUTCMinutes())+":"+pad(k.getUTCSeconds());
            
            var clockEl = document.getElementById("clock-box");
            if(clockEl) clockEl.innerText = "ğŸ‡°ğŸ‡· " + ks + " (KST)";

            upd("ms", now); upd("ru", now); upd("al", now);
        }

        function upd(key, now) {
            var t = TARGETS[key];
            var el = document.getElementById("td-"+key);
            if(!t || t===0 || !el) return;
            var d = t - now;
            if(d<=0) { el.innerHTML = "OPEN!"; el.style.color="#3fb950"; }
            else {
                var h = Math.floor(d/3600000);
                var m = Math.floor((d%3600000)/60000);
                var s = Math.floor((d%60000)/1000);
                var dd = Math.floor(d/86400000);
                el.innerHTML = dd+"d "+pad(h)+":"+pad(m)+":"+pad(s);
                el.style.color="#fff";
            }
        }

        window.toggle = function(id) {
            var el = document.getElementById(id);
            el.style.display = (el.style.display==="block") ? "none" : "block";
        }
        
        window.copy = function(key) {
            var t = document.getElementById("tt-"+key).innerText;
            var time = document.getElementById("td-"+key).innerText;
            prompt("Copy:", t + " : " + time);
        }

        // ì´ˆê¸° ì‹¤í–‰
        draw("ms", DATA.ms);
        draw("ru", makeList(DATA.ruins, "ê³ ëŒ€ìœ ì ", "Ruins"));
        draw("al", makeList(DATA.altar, "ì–´ë‘ ì œë‹¨", "Altar"));
        setInterval(tick, 1000);
        tick();

    })();
    </script>
</body>
</html>
