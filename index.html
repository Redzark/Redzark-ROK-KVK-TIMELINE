<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KVK 1689 STRATEGIC MAP</title>
<style>
    /* === ê¸°ë³¸ ìŠ¤íƒ€ì¼ === */
    body { background-color: #121212; color: #e0e0e0; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 10px; text-align: center; }
    h1 { color: #ffb74d; font-size: 1.5rem; margin: 5px 0; letter-spacing: 1px; }
    .sub { color: #888; font-size: 0.85rem; margin-bottom: 15px; }
    
    #clock-box { 
        background: #1e1e1e; border: 1px solid #333; 
        padding: 6px 12px; border-radius: 15px; 
        display: inline-block; margin-bottom: 15px; 
        font-family: monospace; font-size: 0.85rem; color: #bbb;
    }

    .wrap { max-width: 700px; margin: 0 auto; text-align: left; }

    /* === 1. ì™¸êµ (Diplomacy) === */
    .diplomacy-section { background: #1e1e1e; border: 1px solid #333; border-radius: 10px; padding: 12px; margin-bottom: 15px; }
    .card-t { font-weight: bold; border-bottom: 1px solid #444; padding-bottom: 6px; margin-bottom: 10px; display: block; font-size: 1rem; color: #66bb6a; }
    
    .diplo-grid { display: flex; flex-wrap: wrap; gap: 10px; }
    .diplo-col { flex: 1; min-width: 250px; }
    .tag { display: inline-block; padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; margin: 2px; color: #fff; font-weight: bold; border: 1px solid rgba(255,255,255,0.2); }

    /* ìƒ‰ìƒ í…Œë§ˆ */
    .bg-day { background: #f57f17; color: black; }
    .bg-green { background: #2e7d32; }
    .bg-water { background: #1565c0; }
    .bg-fire { background: #c62828; }
    .bg-earth { background: #4e342e; }
    .bg-wind { background: #4527a0; }

    /* === 2. ì „ìˆ  ì§€ë„ (Advanced Grid) === */
    .map-container {
        position: relative; width: 100%; padding-bottom: 85%; /* ë¹„ìœ¨ */
        background: #0d1117; border: 2px solid #444; border-radius: 12px;
        margin-bottom: 20px; overflow: hidden; box-shadow: inset 0 0 50px #000;
    }

    /* êµ¬ì—­ ë°•ìŠ¤ ê³µí†µ */
    .zone {
        position: absolute; display: flex; align-items: center; justify-content: center;
        border-radius: 4px; font-weight: bold; text-align: center;
        box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        color: rgba(255,255,255,0.8); font-size: 0.75rem; flex-direction: column;
    }
    .label-svr { font-size: 0.65rem; opacity: 0.8; margin-top: 2px; font-weight: normal; }

    /* --- [Zone 4: ìŠ¤íƒ€íŒ… ìº í”„] --- */
    .z4 { border: 1px solid rgba(255,255,255,0.2); z-index: 2; width: 22%; height: 20%; }
    
    /* ì êµ° (ìœ„) */
    .fire { top: 5%; left: 5%; background: linear-gradient(135deg, #5c1818, #3e1010); border-color: #ef5350; }
    .earth { top: 5%; left: 39%; background: linear-gradient(135deg, #4e342e, #3e2723); border-color: #8d6e63; }
    .wind { top: 5%; right: 5%; background: linear-gradient(135deg, #311b92, #1a237e); border-color: #7e57c2; }
    
    /* ì•„êµ° (ì•„ë˜) */
    .day { bottom: 5%; left: 5%; background: linear-gradient(135deg, #f57f17, #ef6c00); border-color: #ffca28; color: #000; }
    .green { bottom: 5%; left: 39%; background: linear-gradient(135deg, #1b5e20, #0d3b10); border-color: #66bb6a; }
    .water { bottom: 5%; right: 5%; background: linear-gradient(135deg, #01579b, #003c6c); border-color: #42a5f5; }

    /* --- [Zone 5: ìˆ˜ì§ ì—°ê²° (ì¢Œìš°)] --- */
    .z5 { width: 12%; height: 30%; background: rgba(100, 100, 100, 0.2); border: 1px dashed #555; z-index: 1; }
    .z5-left { top: 35%; left: 10%; } /* Fire <-> Daybreak ì‚¬ì´ */
    .z5-right { top: 35%; right: 10%; } /* Wind <-> Water ì‚¬ì´ */

    /* --- [Zone 6: ìˆ˜í‰ ì—°ê²° (ìœ„ì•„ë˜)] --- */
    .z6 { width: 25%; height: 12%; background: rgba(100, 100, 100, 0.2); border: 1px dashed #555; z-index: 1; }
    /* ì•„êµ° ì‚¬ì´ (Daybreak <-> Greenwood <-> Water) */
    .z6-bot-left { bottom: 9%; left: 27%; margin-left: -5px; } 
    .z6-bot-right { bottom: 9%; right: 27%; margin-right: -5px; }
    /* ì êµ° ì‚¬ì´ */
    .z6-top-left { top: 9%; left: 27%; margin-left: -5px; }
    .z6-top-right { top: 9%; right: 27%; margin-right: -5px; }

    /* --- [Zone 7: ë‚´ë¶€ ëŒ€ê°ì„ ] --- */
    .z7 { width: 15%; height: 15%; background: rgba(150, 150, 50, 0.15); border: 1px solid #777; z-index: 1; transform: rotate(45deg); }
    /* Zone 6ì—ì„œ ëŒ€ê°ì„  ì•ˆìª½ìœ¼ë¡œ */
    .z7-bl { bottom: 25%; left: 25%; }
    .z7-br { bottom: 25%; right: 25%; }
    .z7-tl { top: 25%; left: 25%; }
    .z7-tr { top: 25%; right: 25%; }

    /* --- [Kingsland: ì¤‘ì•™] --- */
    .kl { 
        top: 50%; left: 50%; transform: translate(-50%, -50%); 
        width: 20%; height: 20%; border-radius: 50%; 
        background: rgba(239, 83, 80, 0.15); border: 2px solid #ef5350; 
        color: #ffb74d; font-weight: bold; z-index: 3;
    }

    /* --- [ê´€ë¬¸ ì•„ì´ì½˜ (Gate)] --- */
    .gate { 
        position: absolute; background: #222; border: 1px solid #fff; 
        color: #fff; font-size: 0.6rem; padding: 1px 3px; border-radius: 3px; 
        z-index: 5; font-weight: bold;
    }
    
    /* G4: ìº í”„ íƒˆì¶œêµ¬ */
    .g4-day-top { bottom: 25%; left: 16%; } /* Daybreak ìœ„ìª½ */
    .g4-day-right { bottom: 15%; left: 27%; } /* Daybreak ì˜¤ë¥¸ìª½ */
    
    /* G5: Z5 ì§„ì… */
    .g5-left { top: 50%; left: 16%; transform: translate(-50%, -50%); }

    /* G6: Z6 ì§„ì… */
    .g6-bot-l { bottom: 15%; left: 39%; transform: translateX(-50%); }

    /* G7: Z7 ì§„ì… (ëŒ€ê°ì„ ) */
    .g7-bl { bottom: 32%; left: 32%; } /* KL ê·¼ì²˜ */

    /* í™”ì‚´í‘œ (ì§„ê²© ë°©í–¥) */
    .arrow { position: absolute; color: rgba(255,255,255,0.3); font-size: 1rem; z-index: 0; }
    .arr-ur { bottom: 22%; left: 22%; transform: rotate(-45deg); } /* Day -> Z7 ë°©í–¥ */

    /* === ê³µì§€ & ë¦¬ìŠ¤íŠ¸ === */
    .sec-box { border: 1px solid #333; border-radius: 8px; background: #1e1e1e; margin-bottom: 10px; overflow: hidden; }
    .sec-head { padding: 10px 15px; background: #252525; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; border-left: 4px solid #666; }
    .sec-body { display: none; padding: 10px; border-top: 1px solid #333; }
    .sec-body.open { display: block; }

    .t-num { font-size: 1.4rem; font-weight: bold; font-family: monospace; color: #fff; }
    .row { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #333; font-size: 0.85rem; }
    .row.active { background: rgba(102, 187, 106, 0.15); border-left: 3px solid #66bb6a; }
    .copy-btn { background: #333; border: 1px solid #555; color: #ccc; font-size: 0.7rem; cursor: pointer; border-radius: 3px; margin-left: 8px; }
</style>
</head>
<body>

    <h1>KVK 1689 DASHBOARD</h1>
    <div class="sub">Storm of Stratagems (ê³„ì±…ì˜ í­í’)</div>
    <div id="clock-box">Loading...</div>

    <div class="wrap">
        
        <div class="diplomacy-section">
            <span class="card-t">ğŸ¤ Diplomacy (ì™¸êµ)</span>
            <div class="diplo-grid">
                <div class="diplo-col">
                    <div style="font-size:0.8rem; color:#66bb6a; margin-bottom:5px; font-weight:bold;">ğŸ”µ ALLIES (ì•„êµ°)</div>
                    <div style="line-height:1.8">
                        <span class="tag bg-day">Daybreak</span>
                        <span class="tag bg-green">Greenwood</span>
                        <span class="tag bg-water">Water</span>
                    </div>
                </div>
                <div class="diplo-col">
                    <div style="font-size:0.8rem; color:#ef5350; margin-bottom:5px; font-weight:bold;">ğŸ”´ ENEMIES (ì êµ°)</div>
                    <div style="line-height:1.8">
                        <span class="tag bg-fire">Fire</span>
                        <span class="tag bg-earth">Earth</span>
                        <span class="tag bg-wind">Wind</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="map-container">
            
            <div class="zone z4 fire">FIRE<div class="label-svr">1393, 3253</div></div>
            <div class="zone z4 earth">EARTH<div class="label-svr">2877, 2620</div></div>
            <div class="zone z4 wind">WIND<div class="label-svr">1486, 1305</div></div>

            <div class="zone z4 day">DAY<br>BREAK<div class="label-svr" style="color:#222">1689, 2334</div></div>
            <div class="zone z4 green">GREEN<br>WOOD<div class="label-svr">3155, 2238</div></div>
            <div class="zone z4 water">WATER<div class="label-svr">1206, 3530</div></div>

            <div class="zone z5 z5-left">Z5</div>
            <div class="zone z5 z5-right">Z5</div>

            <div class="zone z6 z6-top-left">Z6</div>
            <div class="zone z6 z6-top-right">Z6</div>
            <div class="zone z6 z6-bot-left">Z6</div>
            <div class="zone z6 z6-bot-right">Z6</div>

            <div class="zone z7 z7-tl"><span style="transform:rotate(-45deg)">Z7</span></div>
            <div class="zone z7 z7-tr"><span style="transform:rotate(-45deg)">Z7</span></div>
            <div class="zone z7 z7-bl"><span style="transform:rotate(-45deg)">Z7</span></div>
            <div class="zone z7 z7-br"><span style="transform:rotate(-45deg)">Z7</span></div>

            <div class="zone kl">KING'S<br>LAND</div>

            <div class="gate g4-day-top">G4</div>
            <div class="gate g4-day-right">G4</div>
            
            <div class="gate" style="top:25%; left:16%">G4</div> 

            <div class="gate g5-left">G5</div> 

            <div class="gate g6-bot-l">G5</div>

            <div class="gate g7-bl">G7</div>
            <div class="gate" style="top:32%; right:32%">G7</div>

            <div class="arrow arr-ur">â†—</div>

        </div>

        <div class="sec-box" style="padding:15px; margin-bottom:20px;">
            <span class="card-t" style="color:#ffb74d">ğŸ“¢ Notice</span>
            <ul style="padding-left:20px; margin:0; font-size:0.9rem; color:#ccc;">
                <li>âš”ï¸ Goal: 3ì²œë§Œ í‚¬ (30M Kills)</li>
                <li>ğŸšœ Farming: ììœ  (Free)</li>
                <li>â›” City Hit: ê¸ˆì§€ (No Zeroing)</li>
            </ul>
        </div>

        <div class="sec-box">
            <div class="sec-head" style="border-left:4px solid #ef5350" onclick="toggle('s1')">
                <span>ğŸš© Milestones (ì£¼ìš”ì¼ì •)</span><span>â–¼</span>
            </div>
            <div id="s1" class="sec-body open">
                <div id="t-ms" style="text-align:center; padding:10px; background:#121212; border-radius:6px; margin-bottom:5px; border:1px solid #333; display:none">
                    <span id="tt-ms" style="color:#ffb74d; font-weight:bold">-</span>
                    <span id="td-ms" class="t-num">00:00:00</span>
                    <button class="copy-btn" onclick="copyText('ms')">COPY</button>
                </div>
                <div id="l-ms"></div>
            </div>
        </div>

        <div class="sec-box">
            <div class="sec-head" style="border-left:4px solid #42a5f5" onclick="toggle('s2')">
                <span>ğŸ›ï¸ Ruins (ê³ ëŒ€ìœ ì )</span><span>â–¼</span>
            </div>
            <div id="s2" class="sec-body">
                <div id="t-ru" style="text-align:center; padding:10px; background:#121212; border-radius:6px; margin-bottom:5px; border:1px solid #333; display:none">
                    <span id="tt-ru" style="color:#42a5f5; font-weight:bold">-</span>
                    <span id="td-ru" class="t-num">00:00:00</span>
                    <button class="copy-btn" onclick="copyText('ru')">COPY</button>
                </div>
                <div id="l-ru"></div>
            </div>
        </div>

        <div class="sec-box">
            <div class="sec-head" style="border-left:4px solid #ab47bc" onclick="toggle('s3')">
                <span>ğŸ”¥ Altar (ì–´ë‘ ì œë‹¨)</span><span>â–¼</span>
            </div>
            <div id="s3" class="sec-body">
                <div id="t-al" style="text-align:center; padding:10px; background:#121212; border-radius:6px; margin-bottom:5px; border:1px solid #333; display:none">
                    <span id="tt-al" style="color:#ab47bc; font-weight:bold">-</span>
                    <span id="td-al" class="t-num">00:00:00</span>
                    <button class="copy-btn" onclick="copyText('al')">COPY</button>
                </div>
                <div id="l-al"></div>
            </div>
        </div>

    </div>

    <script>
    try {
        function kst(y,m,d,h,min) {
            return Date.UTC(y, m-1, d, h-9, min, 0);
        }

        var DATA = {
            ms: [
                { k:"4ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 4", t: kst(2025,12,14, 0,10) },
                { k:"5ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 5", t: kst(2025,12,18, 0,10) },
                { k:"6ê´€ë¬¸ ì˜¤í”ˆ", e:"Gate 6", t: kst(2025,12,20, 0,10) },
                { k:"í‚¹ìŠ¤ëœë“œ", e:"Kingsland", t: 0 },
                { k:"KVK ì¢…ë£Œ", e:"End", t: 0 }
            ],
            ruins: { start: kst(2025,12,11, 0,10), gap: 40, cnt: 28 },
            altar: { start: kst(2025,12,22, 0,10), gap: 86, cnt: 10 }
        };

        var NEXT = { ms:null, ru:null, al:null };

        function pad(n) { return n<10 ? "0"+n : n; }

        function fmt(ts) {
            if(ts === 0) return "TBA (ì¶”í›„ì•ˆë‚´)";
            var d = new Date(ts + 9*3600000);
            var u = new Date(ts);
            var k = d.getUTCFullYear() + "." + pad(d.getUTCMonth()+1) + "." + pad(d.getUTCDate()) + " " + pad(d.getUTCHours()) + ":" + pad(d.getUTCMinutes());
            var uk = pad(u.getUTCHours()) + ":" + pad(u.getUTCMinutes());
            return "ğŸ‡°ğŸ‡· " + k + "<br>ğŸŒ UTC " + uk;
        }

        function makeList(cfg, k, e) {
            var arr = [];
            var now = new Date().getTime();
            for(var i=0; i<cfg.cnt; i++) {
                var t = cfg.start + (i * cfg.gap * 3600000);
                if(t > now - 7200000) {
                    arr.push({k: k + " ("+(i+1)+")", e: e+" #"+(i+1), t:t});
                }
            }
            return arr;
        }

        function draw(key, arr) {
            var el = document.getElementById("l-"+key);
            var next = null;
            for(var i=0; i<arr.length; i++) {
                if(arr[i].t > 0) { next = arr[i]; break; }
            }
            NEXT[key] = next;

            if(next) {
                document.getElementById("t-"+key).style.display = "block";
                document.getElementById("tt-"+key).innerHTML = next.k;
            }

            var h = "";
            for(var j=0; j<arr.length; j++) {
                var it = arr[j];
                var cls = (it === next) ? "row active" : "row";
                var badge = (it === next) ? "<span class='badge' style='background:#ffb74d;color:#000;padding:1px 4px;font-weight:bold;margin-left:5px;font-size:0.7rem;border-radius:3px;'>NEXT</span>" : "";
                h += "<div class='"+cls+"'><div><b>"+it.k+"</b>"+badge+"<div style='font-size:0.8rem;color:#888'>"+it.e+"</div></div><div style='text-align:right;font-family:monospace;font-size:0.8rem;color:#aaa'>"+fmt(it.t)+"</div></div>";
            }
            if(!arr.length) h="<div style='padding:10px'>ì¢…ë£Œë¨</div>";
            el.innerHTML = h;
        }

        function init() {
            draw("ms", DATA.ms);
            draw("ru", makeList(DATA.ruins, "ê³ ëŒ€ìœ ì ", "Ruins"));
            draw("al", makeList(DATA.altar, "ì–´ë‘ ì œë‹¨", "Altar"));
            setInterval(tick, 1000);
            tick();
        }

        function tick() {
            var now = new Date().getTime();
            var k = new Date(now + 9*3600000);
            var u = new Date(now);
            var ks = k.getUTCFullYear()+"-"+pad(k.getUTCMonth()+1)+"-"+pad(k.getUTCDate())+" "+pad(k.getUTCHours())+":"+pad(k.getUTCMinutes())+":"+pad(k.getUTCSeconds());
            var us = pad(u.getUTCHours())+":"+pad(u.getUTCMinutes())+":"+pad(u.getUTCSeconds());
            document.getElementById("clock-box").innerHTML = "ğŸ‡°ğŸ‡· " + ks + " (KST) | ğŸŒ " + us + " (UTC)";

            upd("ms", now);
            upd("ru", now);
            upd("al", now);
        }

        function upd(key, now) {
            var it = NEXT[key];
            var el = document.getElementById("td-"+key);
            if(!it || !it.t) return;
            var d = it.t - now;
            if(d <= 0) {
                el.innerHTML = "OPEN NOW!";
                el.style.color = "#00e676";
            } else {
                var s = Math.floor((d/1000)%60);
                var m = Math.floor((d/60000)%60);
                var h = Math.floor((d/3600000)%24);
                var dd = Math.floor(d/86400000);
                el.innerHTML = dd+"d "+pad(h)+":"+pad(m)+":"+pad(s);
                el.style.color = "#fff";
            }
        }

        window.toggle = function(id) {
            var el = document.getElementById(id);
            el.style.display = (el.style.display === "block") ? "none" : "block";
        }

        window.copyText = function(key) {
            var t = document.getElementById("tt-"+key).innerText;
            var time = document.getElementById("td-"+key).innerText;
            var txt = "[1689 KVK] " + t + " : " + time + " ë‚¨ìŒ";
            prompt("ë³µì‚¬í•˜ì„¸ìš”:", txt);
        }

        init();

    } catch(e) {
        document.body.innerHTML += "<div style='color:red;'>Error: "+e.message+"</div>";
    }
    </script>
</body>
</html>
