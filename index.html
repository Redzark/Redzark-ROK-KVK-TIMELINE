<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KVK 1689 Command</title>
<style>
    /* === ê¸°ë³¸ ìŠ¤íƒ€ì¼ === */
    body { background-color: #121212; color: #e0e0e0; font-family: sans-serif; margin: 0; padding: 10px; text-align: center; }
    h1 { color: #ffb74d; margin: 5px 0; font-size: 1.4rem; }
    .sub { color: #888; font-size: 0.8rem; margin-bottom: 10px; }
    
    /* ì‹œê³„ (ë¡œë”© ë©ˆì¶¤ ë°©ì§€ìš© ë‹¨ìˆœ ìŠ¤íƒ€ì¼) */
    #clock-display { 
        background: #1e1e1e; border: 1px solid #444; 
        padding: 5px 15px; border-radius: 15px; 
        display: inline-block; margin-bottom: 15px; 
        color: #fff; font-family: monospace; font-size: 0.9rem;
    }

    .wrap { max-width: 700px; margin: 0 auto; text-align: left; }

    /* === 1. ì™¸êµ === */
    .card { background: #1e1e1e; border: 1px solid #333; border-radius: 8px; padding: 10px; margin-bottom: 10px; }
    .card-t { font-weight: bold; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 5px; display: block; font-size: 0.95rem; color: #66bb6a; }
    
    .diplo-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.85rem; }
    .tag { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; margin: 1px; color: #fff; font-weight: bold; text-shadow: 1px 1px 1px rgba(0,0,0,0.5); }

    /* === 2. ë¦¬ì–¼ ë§µ (í¼ì¦í˜• SVG) === */
    .map-container {
        position: relative; width: 100%; padding-bottom: 70%; /* ì§€ë„ ë¹„ìœ¨ */
        background: #0d1117; border: 2px solid #444; border-radius: 10px;
        margin-bottom: 15px; overflow: hidden;
    }
    svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    
    /* êµ¬ì—­ ìŠ¤íƒ€ì¼ (í˜¸ë²„ íš¨ê³¼) */
    .zone-path { stroke: rgba(0,0,0,0.5); stroke-width: 1px; opacity: 0.85; transition: 0.2s; cursor: default; }
    .zone-path:hover { opacity: 1; stroke: #fff; stroke-width: 2px; }
    
    /* ìŠ¤í¬ë¦°ìƒ· ìƒ‰ìƒ ì ìš© */
    .fill-fire { fill: #d32f2f; }   /* ë¹¨ê°• */
    .fill-earth { fill: #ef6c00; }  /* ì£¼í™© */
    .fill-wind { fill: #7b1fa2; }   /* ë³´ë¼ */
    .fill-day { fill: #fbc02d; }    /* ë…¸ë‘ */
    .fill-green { fill: #43a047; }  /* ì´ˆë¡ */
    .fill-water { fill: #29b6f6; }  /* í•˜ëŠ˜ */
    .fill-center { fill: #2e3b42; } /* ì¤‘ì•™ ì¤‘ë¦½ì§€ëŒ€ */
    .fill-kl { fill: rgba(0,0,0,0.5); stroke: #ffb74d; stroke-width: 2px; stroke-dasharray: 4; }

    /* ë§µ ìœ„ í…ìŠ¤íŠ¸ */
    text { font-family: sans-serif; text-anchor: middle; pointer-events: none; fill: white; font-weight: bold; text-shadow: 0 1px 3px rgba(0,0,0,0.9); }
    .txt-l { font-size: 14px; }
    .txt-s { font-size: 10px; fill: #eee; font-weight: normal; }
    .txt-kl { font-size: 16px; fill: #ffb74d; }

    /* === ê³µì§€ & ë¦¬ìŠ¤íŠ¸ === */
    .sec { border: 1px solid #333; border-radius: 8px; background: #1e1e1e; margin-bottom: 8px; overflow: hidden; }
    .sec-h { padding: 10px; background: #252525; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; font-size: 0.9rem; }
    .sec-b { display: none; padding: 10px; border-top: 1px solid #333; }
    .sec-b.on { display: block; }

    .t-disp { text-align: center; background: #111; padding: 8px; border-radius: 5px; margin-bottom: 5px; border: 1px solid #333; display: none; }
    .t-val { font-size: 1.3rem; font-weight: bold; font-family: monospace; color: #fff; }
    
    .row { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #333; font-size: 0.85rem; }
    .row.on { background: rgba(102, 187, 106, 0.15); }
    .badge { background: #ffb74d; color: #000; padding: 1px 4px; border-radius: 3px; font-size: 0.65rem; margin-left: 5px; }
</style>
</head>
<body>

    <h1>KVK 1689 WAR ROOM</h1>
    <div class="sub">Storm of Stratagems (ê³„ì±…ì˜ í­í’)</div>
    
    <div id="clock-display">Initializing...</div>

    <div class="wrap">
        
        <div class="card">
            <span class="card-t">ğŸ¤ Diplomacy</span>
            <div class="diplo-row">
                <span style="color:#66bb6a; font-weight:bold;">ğŸ”µ ì•„êµ° (Allies)</span>
                <div style="text-align:right;">
                    <span class="tag" style="background:#fbc02d; color:#000">Daybreak</span>
                    <span class="tag" style="background:#43a047">Greenwood</span>
                    <span class="tag" style="background:#0277bd">Water</span>
                </div>
            </div>
            <div class="diplo-row">
                <span style="color:#ef5350; font-weight:bold;">ğŸ”´ ì êµ° (Enemies)</span>
                <div style="text-align:right;">
                    <span class="tag" style="background:#c62828">Fire</span>
                    <span class="tag" style="background:#ef6c00">Earth</span>
                    <span class="tag" style="background:#7b1fa2">Wind</span>
                </div>
            </div>
        </div>

        <div class="map-container">
            <svg viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
                <rect width="800" height="600" fill="#111" />

                <path class="zone-path fill-center" d="M 100,150 L 700,150 L 700,450 L 100,450 Z" />

                <path class="zone-path fill-fire" d="M 0,0 L 266,0 L 266,150 L 133,200 L 0,150 Z" />
                <text x="133" y="80" class="txt-l">ğŸ”¥ FIRE</text>
                <text x="133" y="100" class="txt-s">1393, 3253</text>

                <path class="zone-path fill-earth" d="M 266,0 L 533,0 L 533,150 L 400,200 L 266,150 Z" />
                <text x="400" y="80" class="txt-l">â›°ï¸ EARTH</text>
                <text x="400" y="100" class="txt-s">2877, 2620</text>

                <path class="zone-path fill-wind" d="M 533,0 L 800,0 L 800,150 L 666,200 L 533,150 Z" />
                <text x="666" y="80" class="txt-l">ğŸƒ WIND</text>
                <text x="666" y="100" class="txt-s">1486, 1305</text>

                <path class="zone-path fill-day" d="M 0,600 L 266,600 L 266,450 L 133,400 L 0,450 Z" />
                <text x="133" y="520" class="txt-l" fill="#000" style="text-shadow:none">â˜€ï¸ DAYBREAK</text>
                <text x="133" y="540" class="txt-s" fill="#222" style="font-weight:bold">1689, 2334</text>

                <path class="zone-path fill-green" d="M 266,600 L 533,600 L 533,450 L 400,400 L 266,450 Z" />
                <text x="400" y="520" class="txt-l">ğŸŒ² GREENWOOD</text>
                <text x="400" y="540" class="txt-s">3155, 2238</text>

                <path class="zone-path fill-water" d="M 533,600 L 800,600 L 800,450 L 666,400 L 533,450 Z" />
                <text x="666" y="520" class="txt-l">ğŸ’§ WATER</text>
                <text x="666" y="540" class="txt-s">1206, 3530</text>

                <rect x="300" y="250" width="200" height="100" rx="20" class="zone-path z-kl" />
                <text x="400" y="305" class="txt-kl">KING'S LAND</text>
            </svg>
        </div>

        <div class="card" style="border-color:#ffb74d">
            <span class="card-t" style="color:#ffb74d; border:none; margin:0">ğŸ“¢ Notice</span>
            <ul style="padding-left:20px; margin:5px 0 0 0; font-size:0.85rem; color:#ccc;">
                <li>âš”ï¸ Goal: 3ì²œë§Œ í‚¬ (30M Kills)</li>
                <li>ğŸšœ Farming: ììœ  (Free)</li>
                <li>â›” City Hit: ê¸ˆì§€ (No Zeroing)</li>
            </ul>
        </div>

        <div class="sec">
            <div class="sec-h" onclick="toggle('s1')" style="border-left:4px solid #ef5350">
                <span>ğŸš© Milestones (ì£¼ìš”ì¼ì •)</span><span>â–¼</span>
            </div>
            <div id="s1" class="sec-b on">
                <div id="tb-ms" class="t-disp">
                    <div id="tt-ms" style="color:#ffb74d; font-weight:bold; margin-bottom:5px">-</div>
                    <div id="td-ms" class="t-val">00:00:00</div>
                </div>
                <div id="l-ms"></div>
            </div>
        </div>

        <div class="sec">
            <div class="sec-h" onclick="toggle('s2')" style="border-left:4px solid #42a5f5">
                <span>ğŸ›ï¸ Ruins (ê³ ëŒ€ìœ ì )</span><span>â–¼</span>
            </div>
            <div id="s2" class="sec-b">
                <div id="tb-ru" class="t-disp">
                    <div id="tt-ru" style="color:#42a5f5; font-weight:bold; margin-bottom:5px">-</div>
                    <div id="td-ru" class="t-val">00:00:00</div>
                </div>
                <div id="l-ru"></div>
            </div>
        </div>

        <div class="sec">
            <div class="sec-h" onclick="toggle('s3')" style="border-left:4px solid #ab47bc">
                <span>ğŸ”¥ Altar (ì–´ë‘ ì œë‹¨)</span><span>â–¼</span>
            </div>
            <div id="s3" class="sec-b">
                <div id="tb-al" class="t-disp">
                    <div id="tt-al" style="color:#ab47bc; font-weight:bold; margin-bottom:5px">-</div>
                    <div id="td-al" class="t-val">00:00:00</div>
                </div>
                <div id="l-al"></div>
            </div>
        </div>

    </div>

    <script>
    // ===== ë¬´ì¡°ê±´ ì‘ë™í•˜ëŠ” ì•ˆì „ ìŠ¤í¬ë¦½íŠ¸ (ES5) =====
    
    // ë‚ ì§œ ìƒì„± (ë…„, ì›”, ì¼, ì‹œ, ë¶„ -> UTC Timestamp)
    // ì›”ì€ 1~12 ì…ë ¥ë°›ì•„ì„œ ë‚´ë¶€ì—ì„œ -1 ì²˜ë¦¬
    function kst(y, m, d, h, min) {
        // KST(UTC+9)ë¥¼ UTCë¡œ ë³€í™˜í•˜ë ¤ë©´ ì‹œê°„ì—ì„œ 9ë¥¼ ë¹¼ì•¼ í•¨
        return Date.UTC(y, m - 1, d, h - 9, min, 0);
    }

    var DATA = {
        ms: [
            { k: "4ê´€ë¬¸ ì˜¤í”ˆ", e: "Gate 4", t: kst(2025, 12, 14, 0, 10) },
            { k: "5ê´€ë¬¸ ì˜¤í”ˆ", e: "Gate 5", t: kst(2025, 12, 18, 0, 10) },
            { k: "6ê´€ë¬¸ ì˜¤í”ˆ", e: "Gate 6", t: kst(2025, 12, 20, 0, 10) },
            { k: "í‚¹ìŠ¤ëœë“œ", e: "Kingsland", t: 0 },
            { k: "KVK ì¢…ë£Œ", e: "End", t: 0 }
        ],
        ruins: { start: kst(2025, 12, 11, 0, 10), gap: 40, cnt: 28 },
        altar: { start: kst(2025, 12, 22, 0, 10), gap: 86, cnt: 10 }
    };

    var TARGETS = { ms: 0, ru: 0, al: 0 };

    function pad(n) { return n < 10 ? "0" + n : n; }

    function fmt(ts) {
        if (ts === 0) return "TBA (ì¶”í›„ì•ˆë‚´)";
        var d = new Date(ts + 9 * 3600000); // KST
        var u = new Date(ts); // UTC
        var k_str = d.getUTCFullYear() + "." + pad(d.getUTCMonth() + 1) + "." + pad(d.getUTCDate()) + " " + pad(d.getUTCHours()) + ":" + pad(d.getUTCMinutes());
        var u_str = pad(u.getUTCHours()) + ":" + pad(u.getUTCMinutes());
        return "ğŸ‡°ğŸ‡· " + k_str + "<br>ğŸŒ UTC " + u_str;
    }

    function makeList(cfg, k, e) {
        var arr = [];
        var now = new Date().getTime();
        for (var i = 0; i < cfg.cnt; i++) {
            var t = cfg.start + (i * cfg.gap * 3600000);
            if (t > now - 7200000) { // 2ì‹œê°„ ì „êº¼ë¶€í„° í‘œì‹œ
                arr.push({ k: k + " (" + (i + 1) + ")", e: e + " #" + (i + 1), t: t });
            }
        }
        return arr;
    }

    function draw(key, arr) {
        var el = document.getElementById("l-" + key);
        var box = document.getElementById("tb-" + key);
        var tit = document.getElementById("tt-" + key);

        if (arr.length === 0) { el.innerHTML = "ì¢…ë£Œë¨"; return; }

        var next = null;
        for (var i = 0; i < arr.length; i++) {
            if (arr[i].t > 0) { next = arr[i]; break; }
        }
        TARGETS[key] = next ? next.t : 0;

        if (next) {
            box.style.display = "block";
            tit.innerHTML = next.k;
        }

        var h = "";
        for (var j = 0; j < arr.length; j++) {
            var it = arr[j];
            var isNext = (it === next);
            var cls = isNext ? "row on" : "row";
            var badge = isNext ? "<span class='badge'>NEXT</span>" : "";
            h += "<div class='" + cls + "'><div><b>" + it.k + "</b>" + badge + "<div style='font-size:0.75rem;color:#888'>" + it.e + "</div></div><div style='text-align:right;font-family:monospace;font-size:0.75rem;color:#aaa'>" + fmt(it.t) + "</div></div>";
        }
        el.innerHTML = h;
    }

    function tick() {
        var now = new Date().getTime();
        var k = new Date(now + 9 * 3600000);
        var u = new Date(now);
        var ks = k.getUTCFullYear() + "-" + pad(k.getUTCMonth() + 1) + "-" + pad(k.getUTCDate()) + " " + pad(k.getUTCHours()) + ":" + pad(k.getUTCMinutes()) + ":" + pad(k.getUTCSeconds());
        var us = pad(u.getUTCHours()) + ":" + pad(u.getUTCMinutes()) + ":" + pad(u.getUTCSeconds());
        document.getElementById("clock-display").innerHTML = "ğŸ‡°ğŸ‡· " + ks + " (KST) | ğŸŒ " + us + " (UTC)";

        upd("ms", now);
        upd("ru", now);
        upd("al", now);
    }

    function upd(key, now) {
        var t = TARGETS[key];
        var el = document.getElementById("td-" + key);
        if (!t || t === 0) return;
        var d = t - now;
        if (d <= 0) {
            el.innerHTML = "OPEN NOW!";
            el.style.color = "#00e676";
        } else {
            var s = Math.floor((d / 1000) % 60);
            var m = Math.floor((d / 60000) % 60);
            var h = Math.floor((d / 3600000) % 24);
            var dd = Math.floor(d / 86400000);
            el.innerHTML = dd + "d " + pad(h) + ":" + pad(m) + ":" + pad(s);
            el.style.color = "#fff";
        }
    }

    window.toggle = function(id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display === "block") ? "none" : "block";
    }

    // ì‹¤í–‰
    draw("ms", DATA.ms);
    draw("ru", makeList(DATA.ruins, "ê³ ëŒ€ìœ ì ", "Ruins"));
    draw("al", makeList(DATA.altar, "ì–´ë‘ ì œë‹¨", "Altar"));
    setInterval(tick, 1000);
    tick();

    </script>
</body>
</html>
